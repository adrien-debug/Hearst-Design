<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hearst Theme Builder ‚Äî Design System</title>
  <link rel="stylesheet" href="ds.css" />
  <link rel="stylesheet" href="css/modern-master.css" />
  <style>
    * { box-sizing: border-box; }
    body { 
      margin: 0; 
      padding: 0;
      font-family: var(--ds-font-sans);
    }

    /* Layout principal */
    .theme-builder {
      display: grid;
      grid-template-columns: 320px 1fr;
      min-height: 100vh;
      grid-template-rows: auto auto 1fr;
    }
    
    /* Selection bar sticky */
    .selection-bar {
      grid-column: 1 / -1;
      background: var(--ds-bg-surface-2);
      border-bottom: 2px solid var(--ds-border-default);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      gap: 24px;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .selection-bar__item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 8px 16px;
      background: var(--ds-bg-surface-1);
      border: 1px solid var(--ds-border-subtle);
      border-radius: 8px;
      transition: all var(--ds-dur-fast);
    }
    .selection-bar__item:hover {
      border-color: var(--ds-green-400);
    }
    .selection-bar__label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--ds-text-tertiary);
    }
    .selection-bar__value {
      font-size: 14px;
      font-weight: 600;
      color: var(--ds-text-primary);
    }
    .selection-bar__preview {
      display: flex;
      gap: 4px;
    }
    .selection-bar__color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 1px solid var(--ds-border-default);
    }
    .selection-bar__actions {
      margin-left: auto;
      display: flex;
      gap: 8px;
    }
    
    /* Search bar */
    .search-bar {
      flex: 1;
      max-width: 300px;
      position: relative;
    }
    .search-bar input {
      width: 100%;
      padding: 8px 36px 8px 12px;
      background: var(--ds-bg-surface-1);
      border: 1px solid var(--ds-border-default);
      border-radius: 6px;
      color: var(--ds-text-primary);
      font-size: 13px;
      transition: all var(--ds-dur-fast);
    }
    .search-bar input:focus {
      outline: none;
      border-color: var(--ds-green-400);
      box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
    }
    .search-bar input::placeholder {
      color: var(--ds-text-tertiary);
    }
    .search-bar__icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--ds-text-tertiary);
      pointer-events: none;
    }
    
    /* Save/Load menu */
    .dropdown {
      position: relative;
    }
    .dropdown__menu {
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: var(--ds-bg-surface-2);
      border: 1px solid var(--ds-border-default);
      border-radius: 8px;
      padding: 8px;
      min-width: 200px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5);
      display: none;
      z-index: 1000;
    }
    .dropdown__menu.is-open {
      display: block;
    }
    .dropdown__item {
      padding: 10px 12px;
      border-radius: 4px;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
      color: var(--ds-text-primary);
      font-size: 13px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .dropdown__item:hover {
      background: var(--ds-bg-surface-1);
      color: var(--ds-green-400);
    }
    
    /* Copy button */
    .copy-btn {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 8px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-radius: 4px;
      color: var(--ds-green-400);
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
    }
    .copy-btn:hover {
      background: rgba(16, 185, 129, 0.2);
      border-color: var(--ds-green-400);
    }
    .copy-btn.is-copied {
      background: rgba(16, 185, 129, 0.3);
    }
    
    /* Quick nav tabs */
    .quick-nav {
      grid-column: 1 / -1;
      background: var(--ds-bg-surface-1);
      border-bottom: 1px solid var(--ds-border-default);
      padding: 0 24px;
      display: flex;
      gap: 4px;
      overflow-x: auto;
    }
    .quick-nav__tab {
      padding: 12px 20px;
      background: none;
      border: none;
      border-bottom: 2px solid transparent;
      color: var(--ds-text-secondary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
      white-space: nowrap;
    }
    .quick-nav__tab:hover {
      color: var(--ds-text-primary);
      background: var(--ds-bg-surface-2);
    }
    .quick-nav__tab.is-active {
      color: var(--ds-green-400);
      border-bottom-color: var(--ds-green-400);
      font-weight: 600;
    }

    /* ============================================
       CUSTOM NAVIGATION - STATIC & REFINED
       ============================================ */
    
    .custom-nav {
      grid-column: 1 / -1;
      background: #0f172a;
      border-bottom: 1px solid rgba(148, 163, 184, 0.08);
      height: 72px;
      display: flex;
      align-items: center;
      overflow-x: auto;
      overflow-y: hidden;
      position: relative;
    }
    
    /* Hidden state for Favorites mode */
    .custom-nav.is-hidden {
      display: none;
    }
    
    .custom-nav__container {
      display: flex;
      align-items: center;
      gap: 0;
      height: 100%;
      min-width: fit-content;
      padding: 0 32px;
    }
    
    /* Section g√©n√©rique */
    .custom-nav__section {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 12px;
      padding: 0 24px;
      height: 100%;
      min-width: fit-content;
    }
    
    .custom-nav__section--apps {
      padding-left: 0;
    }
    
    /* Header de section */
    .custom-nav__header {
      display: flex;
      align-items: center;
    }
    
    .custom-nav__label {
      font-size: 10px;
      font-weight: 700;
      line-height: 1;
      color: #64748b;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      user-select: none;
    }
    
    /* S√©parateur vertical */
    .custom-nav__separator {
      width: 1px;
      height: 32px;
      background: rgba(148, 163, 184, 0.12);
      flex-shrink: 0;
      align-self: center;
    }
    
    /* Content area */
    .custom-nav__content {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    /* ============================================
       Applications (Pages dynamiques)
       ============================================ */
    
    .custom-nav__apps {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .custom-nav__app-btn {
      display: inline-flex;
      align-items: center;
      height: 36px;
      padding: 0 16px;
      background: transparent;
      border: 1px solid rgba(148, 163, 184, 0.15);
      border-radius: 6px;
      color: #94a3b8;
      font-size: 13px;
      font-weight: 500;
      line-height: 1;
      cursor: pointer;
      transition: all 0.15s ease;
      white-space: nowrap;
      position: relative;
    }
    
    .custom-nav__app-btn:hover {
      background: rgba(148, 163, 184, 0.05);
      border-color: rgba(138, 253, 129, 0.3);
      color: #cbd5e1;
    }
    
    .custom-nav__app-btn.is-active {
      background: rgba(138, 253, 129, 0.08);
      border-color: rgba(138, 253, 129, 0.4);
      color: #8afd81;
      font-weight: 600;
    }
    
    .custom-nav__app-btn.is-active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 2px;
      height: 16px;
      background: #8afd81;
      border-radius: 2px;
    }
    
    /* ============================================
       Raccourcis (Design Tokens & Composants)
       ============================================ */
    
    .custom-nav__shortcuts {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .custom-nav__shortcut {
      display: inline-flex;
      align-items: center;
      height: 28px;
      padding: 0 12px;
      background: transparent;
      border: none;
      border-radius: 4px;
      color: #64748b;
      font-size: 12px;
      font-weight: 500;
      line-height: 1;
      cursor: pointer;
      transition: all 0.12s ease;
      white-space: nowrap;
      position: relative;
    }
    
    .custom-nav__shortcut::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%) scaleX(0);
      width: calc(100% - 16px);
      height: 1px;
      background: #8afd81;
      transition: transform 0.2s ease;
    }
    
    .custom-nav__shortcut:hover {
      background: rgba(148, 163, 184, 0.08);
      color: #cbd5e1;
    }
    
    .custom-nav__shortcut:hover::after {
      transform: translateX(-50%) scaleX(1);
    }
    
    .custom-nav__shortcut:active {
      background: rgba(148, 163, 184, 0.12);
    }
    
    .custom-nav__shortcut:focus-visible {
      outline: 1px solid rgba(138, 253, 129, 0.4);
      outline-offset: 2px;
    }
    
    /* Smart suggestions */
    .smart-suggestions {
      margin: 16px 0;
      padding: 16px;
      background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(20,184,166,0.1) 100%);
      border: 1px solid rgba(16,185,129,0.3);
      border-radius: 8px;
      display: none;
    }
    .smart-suggestions.is-visible {
      display: block;
    }
    .smart-suggestions__title {
      font-size: 13px;
      font-weight: 600;
      color: var(--ds-green-400);
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .smart-suggestions__list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .smart-suggestions__item {
      padding: 10px 12px;
      background: rgba(0,0,0,0.2);
      border-radius: 6px;
      font-size: 13px;
      color: var(--ds-text-secondary);
      cursor: pointer;
      transition: all var(--ds-dur-fast);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .smart-suggestions__item:hover {
      background: rgba(16,185,129,0.15);
      color: var(--ds-text-primary);
    }

    /* Header titre */
    .builder-header {
      grid-column: 1 / -1;
      background: linear-gradient(135deg, #0B0D0E 0%, #171B1F 100%);
      border-bottom: 2px solid var(--ds-border-default);
      padding: var(--ds-space-6) var(--ds-space-8);
      text-align: center;
    }
    .builder-header h1 {
      margin: 0;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, #f8fafc 0%, #94a3b8 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .builder-header p {
      margin: 8px 0 0 0;
      color: var(--ds-text-secondary);
      font-size: 14px;
    }

    /* Sidebar de s√©lection */
    .selector-sidebar {
      background: var(--ds-bg-surface-1);
      border-right: 1px solid var(--ds-border-default);
      padding: var(--ds-space-6);
      overflow-y: auto;
      height: calc(100vh - 120px);
    }

    /* Section de tokens */
    /* ============================================
       TOKEN SECTIONS - Structure am√©lior√©e
       ============================================ */
    
    .token-section {
      margin-bottom: var(--ds-space-8);
      padding: var(--ds-space-6);
      background: linear-gradient(135deg, rgba(18,21,24,0.3) 0%, rgba(18,21,24,0.1) 100%);
      border: 1px solid var(--ds-border-subtle);
      border-radius: 12px;
      transition: all var(--ds-dur-base) var(--ds-ease-standard);
    }
    
    .token-section:hover {
      border-color: var(--ds-border-default);
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }
    
    .token-section:last-child {
      margin-bottom: 0;
    }
    
    .token-section__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--ds-space-6);
      padding-bottom: var(--ds-space-4);
      border-bottom: 2px solid var(--ds-border-default);
    }
    
    .token-section__title {
      font-size: 18px;
      font-weight: 700;
      margin: 0;
      color: var(--ds-text-primary);
      letter-spacing: -0.01em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .token-section__title::before {
      content: '';
      width: 4px;
      height: 24px;
      background: linear-gradient(180deg, var(--ds-green-400) 0%, var(--ds-green-600) 100%);
      border-radius: 2px;
      box-shadow: 0 0 8px rgba(16, 185, 129, 0.4);
    }

    /* Grille de palettes */
    .palette-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 12px;
    }

    /* Carte palette (miniature) */
    .palette-card {
      aspect-ratio: 1;
      border: 2px solid var(--ds-border-subtle);
      border-radius: 12px;
      cursor: pointer;
      overflow: hidden;
      transition: all var(--ds-dur-base) var(--ds-ease-standard);
      position: relative;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .palette-card::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(255,255,255,0.05) 0%, transparent 100%);
      pointer-events: none;
      opacity: 0;
      transition: opacity var(--ds-dur-fast);
    }
    
    .palette-card:hover {
      transform: translateY(-4px) scale(1.02);
      border-color: var(--ds-green-400);
      box-shadow: 0 12px 32px rgba(16,185,129,0.25);
    }
    
    .palette-card:hover::after {
      opacity: 1;
    }
    
    .palette-card.is-active {
      border-color: var(--ds-green-400);
      box-shadow: 0 0 0 4px rgba(16,185,129,0.2), 0 8px 24px rgba(16,185,129,0.3);
      transform: scale(1.03);
    }
    
    .palette-card.is-active::after {
      opacity: 1;
    }
    .palette-card__colors {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, 1fr);
      height: 100%;
      width: 100%;
    }
    .palette-card__color {
      width: 100%;
      height: 100%;
    }
    .palette-card__name {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(4px);
      padding: 6px 8px;
      font-size: 11px;
      font-weight: 600;
      text-align: center;
      color: white;
    }

    /* Bouton ajouter */
    .add-button {
      width: 100%;
      padding: 12px;
      background: var(--ds-bg-surface-2);
      border: 2px dashed var(--ds-border-default);
      border-radius: var(--ds-radius-3);
      color: var(--ds-text-secondary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .add-button:hover {
      background: var(--ds-bg-surface-3);
      border-color: var(--ds-green-400);
      color: var(--ds-green-400);
    }
    .add-icon {
      width: 20px;
      height: 20px;
      border: 2px solid currentColor;
      border-radius: 50%;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .add-icon::before,
    .add-icon::after {
      content: '';
      position: absolute;
      background: currentColor;
    }
    .add-icon::before {
      width: 10px;
      height: 2px;
    }
    .add-icon::after {
      width: 2px;
      height: 10px;
    }

    /* Zone de preview */
    .preview-zone {
      background: var(--ds-bg-canvas);
      padding: 0;
      overflow-y: auto;
      height: calc(100vh - 120px);
      display: flex;
      flex-direction: column;
    }
    
    /* Pages tabs system */
    .pages-bar {
      background: var(--ds-bg-surface-1);
      border-bottom: 2px solid var(--ds-border-default);
      padding: 12px 24px;
      display: flex;
      align-items: center;
      gap: 8px;
      overflow-x: auto;
      flex-shrink: 0;
    }
    .page-tab {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px 16px;
      background: var(--ds-bg-surface-2);
      border: 1px solid var(--ds-border-default);
      border-radius: 6px;
      color: var(--ds-text-secondary);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
      white-space: nowrap;
      position: relative;
    }
    .page-tab:hover {
      background: var(--ds-bg-surface-3);
      border-color: var(--ds-green-400);
      color: var(--ds-text-primary);
    }
    .page-tab.is-active {
      background: var(--ds-green-400);
      border-color: var(--ds-green-400);
      color: #000;
      font-weight: 600;
    }
    .page-tab__icon {
      font-size: 16px;
    }
    .page-tab__close {
      margin-left: 4px;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 14px;
      opacity: 0.6;
      transition: all var(--ds-dur-fast);
    }
    .page-tab__close:hover {
      opacity: 1;
      background: rgba(0,0,0,0.2);
    }
    .page-tab__actions {
      margin-left: 4px;
      display: inline-flex;
      gap: 6px;
      align-items: center;
    }
    .page-tab__action-btn {
      appearance: none;
      border: 1px solid var(--ds-border-default);
      background: rgba(0,0,0,0.12);
      color: inherit;
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.02em;
      padding: 3px 8px;
      border-radius: 999px;
      cursor: pointer;
      transition: all var(--ds-dur-fast);
    }
    .page-tab__action-btn:hover {
      border-color: var(--ds-green-400);
      transform: translateY(-1px);
    }
    .page-tab__action-btn--danger {
      border-color: rgba(180, 40, 40, 0.55);
      background: rgba(180, 40, 40, 0.12);
      color: #ffd7d7;
    }
    .page-tab__action-btn--danger:hover {
      border-color: rgba(180, 40, 40, 0.85);
    }
    .page-tab--add {
      background: transparent;
      border: 2px dashed var(--ds-border-default);
      color: var(--ds-text-tertiary);
      padding: 10px 20px;
    }
    .page-tab--add:hover {
      border-color: var(--ds-green-400);
      color: var(--ds-green-400);
      background: rgba(16, 185, 129, 0.05);
    }
    
    /* Page content wrapper */
    .page-content-wrapper {
      flex: 1;
      padding: var(--ds-space-8);
      overflow-y: auto;
      background: var(--preview-bg, radial-gradient(ellipse at top, #1e293b 0%, #0f172a 50%, #020617 100%));
    }
    
    /* Page templates */
    .page-template {
      display: none;
      animation: fadeIn 0.3s ease;
    }
    .page-template.is-active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(100px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideOut {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(100px); }
    }
    .preview-label {
      display: inline-block;
      padding: 6px 12px;
      background: var(--ds-bg-surface-2);
      border-radius: 6px;
      font-size: 12px;
      font-weight: 700;
      letter-spacing: 0.05em;
      color: var(--ds-text-tertiary);
      margin-bottom: var(--ds-space-6);
      text-transform: uppercase;
    }
    .preview-content {
      background: var(--preview-bg, var(--ds-bg-surface-1));
      border: 1px solid var(--ds-border-default);
      border-radius: var(--ds-radius-3);
      padding: var(--ds-space-10);
      min-height: 600px;
    }

    /* Modal popup */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(4px);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .modal-overlay.is-visible {
      display: flex;
    }
    .modal {
      background: var(--ds-bg-surface-1);
      border: 1px solid var(--ds-border-default);
      border-radius: var(--ds-radius-3);
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    }
    .modal__header {
      padding: var(--ds-space-6);
      border-bottom: 1px solid var(--ds-border-subtle);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal__title {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }
    .modal__close {
      background: none;
      border: none;
      color: var(--ds-text-secondary);
      font-size: 24px;
      cursor: pointer;
      padding: 4px 8px;
      line-height: 1;
      transition: color var(--ds-dur-fast);
    }
    .modal__close:hover {
      color: var(--ds-text-primary);
    }
    .modal__body {
      padding: var(--ds-space-6);
    }
    .modal__footer {
      padding: var(--ds-space-6);
      border-top: 1px solid var(--ds-border-subtle);
      display: flex;
      gap: 12px;
      justify-content: flex-end;
    }

    /* Token display */
    .token-group {
      margin-bottom: var(--ds-space-6);
    }
    .token-group__title {
      font-size: 14px;
      font-weight: 600;
      color: var(--ds-text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--ds-space-3);
    }
    .token-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 12px;
      background: var(--ds-bg-surface-2);
      border-radius: var(--ds-radius-2);
      margin-bottom: 6px;
      transition: all var(--ds-dur-fast);
    }
    .token-item:hover {
      background: var(--ds-bg-surface-3);
    }
    .token-item__name {
      font-size: 13px;
      font-weight: 500;
      color: var(--ds-text-secondary);
    }
    .token-item__value {
      font-family: var(--ds-font-mono);
      font-size: 12px;
      color: var(--ds-text-primary);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .token-item__swatch {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 1px solid var(--ds-border-default);
    }

    /* Gradient preview */
    .gradient-preview {
      width: 100%;
      height: 80px;
      border-radius: var(--ds-radius-2);
      margin-bottom: var(--ds-space-4);
      border: 1px solid var(--ds-border-default);
    }

    /* Responsive */
    @media (max-width: 768px) {
      .theme-builder {
        grid-template-columns: 1fr;
      }
      .selector-sidebar {
        height: auto;
        max-height: 400px;
      }
      .preview-zone {
        height: auto;
        min-height: 400px;
      }
    }

    /* ========================================
       TOAST NOTIFICATIONS SYSTEM
       ======================================== */
    
    .toast-container {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 10000;
      display: flex;
      flex-direction: column;
      gap: 12px;
      pointer-events: none;
    }
    
    .toast {
      min-width: 300px;
      max-width: 400px;
      padding: 16px 20px;
      background: var(--ds-bg-surface-1);
      border: 1px solid var(--ds-border-default);
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      gap: 12px;
      pointer-events: auto;
      animation: slideInRight 0.3s cubic-bezier(0.2, 0.0, 0.0, 1.0);
      opacity: 0;
      animation-fill-mode: forwards;
    }
    
    .toast--success {
      border-left: 4px solid var(--ds-green-400);
    }
    
    .toast--error {
      border-left: 4px solid #ef4444;
    }
    
    .toast--warning {
      border-left: 4px solid #f59e0b;
    }
    
    .toast--info {
      border-left: 4px solid #3b82f6;
    }
    
    .toast__icon {
      font-size: 24px;
      flex-shrink: 0;
    }
    
    .toast__content {
      flex: 1;
    }
    
    .toast__title {
      font-weight: 600;
      color: var(--ds-text-primary);
      margin-bottom: 4px;
      font-size: 14px;
    }
    
    .toast__message {
      color: var(--ds-text-secondary);
      font-size: 13px;
      line-height: 1.4;
    }
    
    .toast__close {
      background: none;
      border: none;
      color: var(--ds-text-tertiary);
      font-size: 20px;
      cursor: pointer;
      padding: 4px;
      line-height: 1;
      transition: color var(--ds-dur-fast);
      flex-shrink: 0;
    }
    
    .toast__close:hover {
      color: var(--ds-text-primary);
    }
    
    @keyframes slideInRight {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOutRight {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }
    
    /* ========================================
       LOADING STATES
       ======================================== */
    
    .btn-loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }
    
    .btn-loading::after {
      content: '';
      position: absolute;
      width: 16px;
      height: 16px;
      top: 50%;
      left: 50%;
      margin-left: -8px;
      margin-top: -8px;
      border: 2px solid transparent;
      border-top-color: currentColor;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ========================================
       FOCUS STATES (ACCESSIBILIT√â)
       ======================================== */
    
    .palette-card:focus-visible,
    .ds-btn:focus-visible,
    .page-tab:focus-visible,
    .quick-nav__tab:focus-visible {
      outline: 3px solid var(--ds-green-400);
      outline-offset: 2px;
    }
    
    button:focus-visible,
    a:focus-visible {
      outline: 2px solid var(--ds-green-400);
      outline-offset: 2px;
    }
    
    /* ========================================
       COPY FEEDBACK ANIMATION
       ======================================== */
    
    @keyframes checkmark {
      0% {
        transform: scale(0);
        opacity: 0;
      }
      50% {
        transform: scale(1.2);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    .copy-success {
      animation: checkmark 0.5s cubic-bezier(0.2, 0.0, 0.0, 1.2);
    }
    
    /* Am√©lioration contrastes pour accessibilit√© */
    .token-item__name,
    .selection-bar__label,
    .ds-text-tertiary,
    .search-bar input::placeholder {
      color: rgba(255, 255, 255, 0.7) !important; /* √âtait 0.4, maintenant 0.7 pour meilleur contraste */
    }
    
  </style>
</head>

<body>
  <!-- Header -->
  <div class="theme-builder">
    <div class="builder-header">
      <h1>HEARST TITRE</h1>
      <p>Theme Builder ‚Äî S√©lectionnez vos tokens graphiques</p>
    </div>

    <!-- Selection Bar (Sticky) -->
    <div class="selection-bar">
      <div class="selection-bar__item">
        <div>
          <div class="selection-bar__label">Couleurs</div>
          <div class="selection-bar__value" id="selectedPaletteName">Dark Pro</div>
        </div>
        <div class="selection-bar__preview" id="selectedPalettePreview">
          <div class="selection-bar__color" style="background: #0f172a;"></div>
          <div class="selection-bar__color" style="background: #10b981;"></div>
          <div class="selection-bar__color" style="background: #1e293b;"></div>
        </div>
      </div>
      
      <div class="selection-bar__item">
        <div>
          <div class="selection-bar__label">Composant</div>
          <div class="selection-bar__value" id="selectedComponent">Preview</div>
        </div>
      </div>
      
      <!-- Search bar -->
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="üîç Rechercher palettes, composants..." oninput="handleSearch(event)">
        <span class="search-bar__icon">‚åòK</span>
      </div>
      
      <div class="selection-bar__actions">
        <button class="ds-btn ds-btn--secondary" onclick="compareMode()" style="font-size: 12px; padding: 8px 16px;">
          Compare
        </button>
        
        <!-- Save/Load dropdown -->
        <div class="dropdown" id="saveLoadDropdown">
          <button class="ds-btn ds-btn--secondary" onclick="toggleSaveLoadMenu()" style="font-size: 12px; padding: 8px 16px;">
            üíæ Save/Load
          </button>
          <div class="dropdown__menu" id="saveLoadMenu">
            <div class="dropdown__item" onclick="saveTheme()">
              <span>üíæ</span>
              <span>Save Theme</span>
            </div>
            <div class="dropdown__item" onclick="loadTheme()">
              <span>üìÇ</span>
              <span>Load Theme</span>
            </div>
            <div class="dropdown__item" onclick="viewSavedThemes()">
              <span>üìö</span>
              <span>Saved Themes</span>
            </div>
            <div style="height: 1px; background: var(--ds-border-default); margin: 4px 0;"></div>
            <div class="dropdown__item" onclick="importTheme()">
              <span>üì•</span>
              <span>Import JSON</span>
            </div>
          </div>
        </div>
        
        <button class="ds-btn ds-btn--primary" onclick="exportTheme()" style="font-size: 12px; padding: 8px 16px;">
          ‚¨á Export
        </button>
      </div>
    </div>

    <!-- Navigation Principale : Favoris / Custom -->
    <div class="quick-nav">
      <button class="quick-nav__tab is-active" onclick="switchToMode('favoris', this)" aria-label="Mode Favoris - Acc√®s rapide aux configurations">
        Favorites
      </button>
      <button class="quick-nav__tab" onclick="switchToMode('custom', this)" aria-label="Mode Custom - Acc√®s avanc√© et personnalisation compl√®te">
        Custom Builder
      </button>
    </div>

    <!-- Navigation Custom (STATIC - Shown only in Custom mode) -->
    <div class="custom-nav is-hidden" id="customNav">
      <div class="custom-nav__container">
        
        <!-- Applications Section -->
        <div class="custom-nav__section custom-nav__section--apps">
          <div class="custom-nav__header">
            <div class="custom-nav__label">PAGES</div>
          </div>
          <div class="custom-nav__content">
            <div class="custom-nav__apps" id="customNavApps">
              <!-- Dynamic pages injected here -->
            </div>
          </div>
        </div>

        <div class="custom-nav__separator"></div>

        <!-- Design Tokens Section -->
        <div class="custom-nav__section custom-nav__section--tokens">
          <div class="custom-nav__header">
            <div class="custom-nav__label">DESIGN TOKENS</div>
          </div>
          <div class="custom-nav__content">
            <div class="custom-nav__shortcuts">
              <button class="custom-nav__shortcut" onclick="scrollToSection('couleurs')" data-section="colors">
                Colors
              </button>
              <button class="custom-nav__shortcut" onclick="scrollToSection('typographie')" data-section="typography">
                Typography
              </button>
              <button class="custom-nav__shortcut" onclick="scrollToSection('espacements')" data-section="spacing">
                Spacing
              </button>
            </div>
          </div>
        </div>

        <div class="custom-nav__separator"></div>

        <!-- Components Section -->
        <div class="custom-nav__section custom-nav__section--components">
          <div class="custom-nav__header">
            <div class="custom-nav__label">COMPONENTS</div>
          </div>
          <div class="custom-nav__content">
            <div class="custom-nav__shortcuts">
              <button class="custom-nav__shortcut" onclick="scrollToSection('boxes')" data-section="boxes">
                Boxes
              </button>
              <button class="custom-nav__shortcut" onclick="scrollToSection('menu')" data-section="menu">
                Navigation
              </button>
              <button class="custom-nav__shortcut" onclick="scrollToSection('forms')" data-section="forms">
                Forms
              </button>
              <button class="custom-nav__shortcut" onclick="scrollToSection('alerts')" data-section="alerts">
                Alerts
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Sidebar de s√©lection -->
    <aside class="selector-sidebar">
      <!-- Section Favoris (Configurations Pr√©d√©finies) -->
      <section class="token-section" id="favoris" style="display: block;">
        <div class="token-section__header">
          <h2 class="token-section__title">‚≠ê Favoris - Configurations</h2>
        </div>
        
        <!-- Full Width Config Cards -->
        <div style="display: flex; flex-direction: column; gap: 16px; padding: 20px;">
          
          <!-- Configuration 1: Style Hearst Qatar -->
          <div onclick="applyConfigPreset('config1')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üá∂üá¶ Style Hearst Qatar</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Vert Hearst (#8AFD81) ‚Ä¢ Glassmorphism ‚Ä¢ Modern</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="display: flex; gap: 6px; margin-top: 12px;">
              <div style="flex: 1; height: 10px; background: #0f172a; border-radius: 4px;"></div>
              <div style="flex: 1; height: 10px; background: #1e293b; border-radius: 4px;"></div>
              <div style="flex: 1; height: 10px; background: #8AFD81; border-radius: 4px; box-shadow: 0 0 12px rgba(138, 253, 129, 0.4);"></div>
              <div style="flex: 1; height: 10px; background: #7AED71; border-radius: 4px;"></div>
            </div>
          </div>

          <!-- Configuration 2: Light Clean + Modern + Confortable -->
          <div onclick="applyConfigPreset('config2')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='var(--ds-green-400)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(16, 185, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚öôÔ∏è Configuration 2 - Light & Clean</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Light Clean ‚Ä¢ Modern ‚Ä¢ Confortable</div>
              </div>
              <div style="font-size: 24px;">‚Üí</div>
            </div>
            <div style="display: flex; gap: 6px; margin-top: 12px;">
              <div style="flex: 1; height: 8px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #f1f5f9; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #0ea5e9; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #e0f2fe; border-radius: 4px;"></div>
            </div>
          </div>

          <!-- Configuration 3: Blue Tech + System + Compact -->
          <div onclick="applyConfigPreset('config3')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='var(--ds-green-400)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(16, 185, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚öôÔ∏è Configuration 3 - Tech Dashboard</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Blue Tech ‚Ä¢ System ‚Ä¢ Compact</div>
              </div>
              <div style="font-size: 24px;">‚Üí</div>
            </div>
            <div style="display: flex; gap: 6px; margin-top: 12px;">
              <div style="flex: 1; height: 8px; background: #0c4a6e; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #075985; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #06b6d4; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #e0f2fe; border-radius: 4px;"></div>
            </div>
          </div>

          <!-- Configuration 4: Green Mining + Modern + Compact -->
          <div onclick="applyConfigPreset('config4')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='var(--ds-green-400)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(16, 185, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚öôÔ∏è Configuration 4 - Mining Ops</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Green Mining ‚Ä¢ Modern ‚Ä¢ Compact</div>
              </div>
              <div style="font-size: 24px;">‚Üí</div>
            </div>
            <div style="display: flex; gap: 6px; margin-top: 12px;">
              <div style="flex: 1; height: 8px; background: #052e16; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #14532d; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #22c55e; border-radius: 4px;"></div>
              <div style="flex: 1; height: 8px; background: #dcfce7; border-radius: 4px;"></div>
            </div>
          </div>

        </div>

        <button class="add-button" onclick="openCustomConfigCreator()">
          <span class="add-icon"></span>
          üé® Cr√©er Config Custom
        </button>
      </section>
      
      <!-- Section Couleurs -->
      <section class="token-section" id="couleurs">
        <div class="token-section__header">
          <h2 class="token-section__title">Couleurs</h2>
        </div>
        
        <!-- Smart Suggestions -->
        <div class="smart-suggestions" id="colorSuggestions">
          <div class="smart-suggestions__title">
            <span>üí°</span>
            <span>Suggestions intelligentes</span>
          </div>
          <div class="smart-suggestions__list">
            <div class="smart-suggestions__item" onclick="applySuggestion('dark-pro', 'card-glass')">
              <span>‚ú® Dark Pro + Card Glass = Perfect combo</span>
              <span style="font-size: 11px; color: var(--ds-green-400);">Essayer ‚Üí</span>
            </div>
            <div class="smart-suggestions__item" onclick="applySuggestion('blue-tech', 'menu-sidebar')">
              <span>üéØ Blue Tech recommended for tech dashboards</span>
              <span style="font-size: 11px; color: var(--ds-green-400);">Essayer ‚Üí</span>
            </div>
          </div>
        </div>
        
        <div class="palette-grid" id="colorPalettes">
          <!-- Palette 1: Dark Pro -->
          <div class="palette-card is-active" data-palette="dark-pro" onclick="applyPaletteDirectly('dark-pro')">
            <div class="palette-card__colors">
              <div class="palette-card__color" style="background: #0f172a;"></div>
              <div class="palette-card__color" style="background: #10b981;"></div>
              <div class="palette-card__color" style="background: #1e293b;"></div>
              <div class="palette-card__color" style="background: #f8fafc;"></div>
            </div>
            <div class="palette-card__name">Dark Pro</div>
          </div>

          <!-- Palette 2: Light Clean -->
          <div class="palette-card" data-palette="light-clean" onclick="applyPaletteDirectly('light-clean')">
            <div class="palette-card__colors">
              <div class="palette-card__color" style="background: #ffffff;"></div>
              <div class="palette-card__color" style="background: #0ea5e9;"></div>
              <div class="palette-card__color" style="background: #f1f5f9;"></div>
              <div class="palette-card__color" style="background: #0f172a;"></div>
            </div>
            <div class="palette-card__name">Light Clean</div>
          </div>

          <!-- Palette 3: Blue Tech -->
          <div class="palette-card" data-palette="blue-tech" onclick="applyPaletteDirectly('blue-tech')">
            <div class="palette-card__colors">
              <div class="palette-card__color" style="background: #0c4a6e;"></div>
              <div class="palette-card__color" style="background: #06b6d4;"></div>
              <div class="palette-card__color" style="background: #075985;"></div>
              <div class="palette-card__color" style="background: #e0f2fe;"></div>
            </div>
            <div class="palette-card__name">Blue Tech</div>
          </div>

          <!-- Palette 4: Green Mining -->
          <div class="palette-card" data-palette="green-mining" onclick="applyPaletteDirectly('green-mining')">
            <div class="palette-card__colors">
              <div class="palette-card__color" style="background: #052e16;"></div>
              <div class="palette-card__color" style="background: #22c55e;"></div>
              <div class="palette-card__color" style="background: #14532d;"></div>
              <div class="palette-card__color" style="background: #dcfce7;"></div>
            </div>
            <div class="palette-card__name">Green Mining</div>
          </div>
        </div>

        <button class="add-button" onclick="openCustomPaletteCreator()">
          <span class="add-icon"></span>
          üé® Cr√©er palette custom
        </button>
      </section>

      <!-- Section Typographie -->
      <section class="token-section" id="typographie">
        <div class="token-section__header">
          <h2 class="token-section__title">Typographie</h2>
        </div>
        
        <div class="palette-grid">
          <div class="palette-card is-active" data-typo="modern" onclick="applyTypography('modern')">
            <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%; background: var(--ds-bg-surface-2); padding:8px;">
              <div style="font-size:20px; font-weight:700; color: var(--ds-text-primary);">Aa</div>
              <div style="font-size:10px; color: var(--ds-text-tertiary); margin-top:4px;">Inter</div>
            </div>
            <div class="palette-card__name">Modern</div>
          </div>

          <div class="palette-card" data-typo="system" onclick="applyTypography('system')">
            <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%; background: var(--ds-bg-surface-2); padding:8px;">
              <div style="font-size:20px; font-weight:700; color: var(--ds-text-primary); font-family: system-ui;">Aa</div>
              <div style="font-size:10px; color: var(--ds-text-tertiary); margin-top:4px;">System</div>
            </div>
            <div class="palette-card__name">System</div>
          </div>
        </div>

        <button class="add-button">
          <span class="add-icon"></span>
          Nouveau style typo
        </button>
      </section>

      <!-- Section Espacements -->
      <section class="token-section" id="espacements">
        <div class="token-section__header">
          <h2 class="token-section__title">Espacements</h2>
        </div>
        
        <div class="palette-grid">
          <div class="palette-card" data-spacing="compact" onclick="applySpacing('compact')">
            <div style="display:flex; flex-direction:column; gap:3px; justify-content:center; align-items:center; height:100%; background: var(--ds-bg-surface-2); padding:12px;">
              <div style="width:60%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
              <div style="width:80%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
              <div style="width:70%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
            </div>
            <div class="palette-card__name">Compact</div>
          </div>

          <div class="palette-card is-active" data-spacing="comfortable" onclick="applySpacing('comfortable')">
            <div style="display:flex; flex-direction:column; gap:8px; justify-content:center; align-items:center; height:100%; background: var(--ds-bg-surface-2); padding:12px;">
              <div style="width:60%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
              <div style="width:80%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
              <div style="width:70%; height:8px; background: var(--ds-green-400); border-radius:2px;"></div>
            </div>
            <div class="palette-card__name">Confortable</div>
          </div>
        </div>

        <button class="add-button">
          <span class="add-icon"></span>
          Nouveau syst√®me
        </button>
      </section>

      <!-- Section Boxes / Cards -->
      <section class="token-section" id="boxes">
        <div class="token-section__header">
          <h2 class="token-section__title">üì¶ Boxes / Cards</h2>
        </div>
        
        <!-- Full Width Component Cards -->
        <div style="display: flex; flex-direction: column; gap: 16px; padding: 20px;">
          
          <!-- Glassmorphism Hearst -->
          <div onclick="showComponentPreview('card-hearst-glass')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìä Glassmorphism Hearst</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Effet verre d√©poli ‚Ä¢ Bordure verte lumineuse ‚Ä¢ Modern blur</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 16px; background: rgba(255,255,255,0.1); backdrop-filter: blur(12px); border: 1px solid rgba(138,253,129,0.3); border-radius: 12px; box-shadow: 0 0 20px rgba(138,253,129,0.15);">
              <div style="width: 48px; height: 48px; background: rgba(138,253,129,0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center; border: 1px solid rgba(138,253,129,0.4); margin-bottom: 12px;">
                <span style="font-size: 24px;">üìä</span>
              </div>
              <div style="width: 80%; height: 12px; background: rgba(255,255,255,0.8); border-radius: 3px; margin-bottom: 8px;"></div>
              <div style="width: 60%; height: 10px; background: rgba(255,255,255,0.4); border-radius: 2px;"></div>
            </div>
          </div>

          <!-- KPI Card -->
          <div onclick="showComponentPreview('card-kpi')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìà KPI Card</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Carte statistiques ‚Ä¢ Border-left accent ‚Ä¢ Chiffres cl√©s</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border-left: 4px solid #8AFD81; border-radius: 8px;">
              <div style="width: 50%; height: 10px; background: rgba(255,255,255,0.4); border-radius: 2px; margin-bottom: 12px;"></div>
              <div style="font-size: 36px; font-weight: bold; color: #8AFD81; margin-bottom: 8px;">5.98 EH/s</div>
              <div style="width: 40%; height: 8px; background: rgba(138,253,129,0.3); border-radius: 2px;"></div>
            </div>
          </div>

          <!-- Card Action -->
          <div onclick="showComponentPreview('card-action')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üéØ Card Action</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Carte avec CTA ‚Ä¢ Bouton Hearst vert ‚Ä¢ Call-to-action</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px;">
              <div style="width: 85%; height: 14px; background: rgba(255,255,255,0.6); border-radius: 3px; margin-bottom: 8px;"></div>
              <div style="width: 70%; height: 10px; background: rgba(255,255,255,0.3); border-radius: 2px; margin-bottom: 16px;"></div>
              <div style="padding: 12px 24px; background: #8AFD81; border-radius: 8px; display: inline-block; font-weight: 600; color: #0f172a; box-shadow: 0 4px 12px rgba(138,253,129,0.3);">
                Voir les d√©tails ‚Üí
              </div>
            </div>
          </div>

          <!-- Card Glow -->
          <div onclick="showComponentPreview('card-glow')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚ú® Card Glow</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Bordure luminescente ‚Ä¢ Effet glow vert ‚Ä¢ Hover premium</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border: 2px solid #8AFD81; border-radius: 12px; box-shadow: 0 0 30px rgba(138,253,129,0.3);">
              <div style="width: 48px; height: 48px; background: #8AFD81; border-radius: 8px; margin-bottom: 12px; box-shadow: 0 0 20px rgba(138,253,129,0.5);"></div>
              <div style="width: 75%; height: 12px; background: rgba(255,255,255,0.6); border-radius: 2px; margin-bottom: 8px;"></div>
              <div style="width: 55%; height: 8px; background: rgba(255,255,255,0.4); border-radius: 2px;"></div>
            </div>
          </div>

          <!-- Card Image -->
          <div onclick="showComponentPreview('card-image')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üñºÔ∏è Card Image</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Carte avec hero image ‚Ä¢ D√©grad√© vert Hearst ‚Ä¢ Full-bleed</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="background: var(--ds-bg-surface-2); border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.2);">
              <div style="width: 100%; height: 120px; background: linear-gradient(135deg, #8AFD81 0%, #7AED71 100%); display: flex; align-items: center; justify-content: center;">
                <span style="font-size: 48px; opacity: 0.3;">üñºÔ∏è</span>
              </div>
              <div style="padding: 16px;">
                <div style="width: 80%; height: 12px; background: rgba(255,255,255,0.6); border-radius: 2px; margin-bottom: 8px;"></div>
                <div style="width: 60%; height: 8px; background: rgba(255,255,255,0.3); border-radius: 2px;"></div>
              </div>
            </div>
          </div>

          <!-- Card Liste -->
          <div onclick="showComponentPreview('card-list')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìã Card Liste</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Liste √† puces vertes ‚Ä¢ Bullet points ‚Ä¢ Activit√©s r√©centes</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border-radius: 8px;">
              <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                <div style="width: 8px; height: 8px; background: #8AFD81; border-radius: 50%; flex-shrink: 0; box-shadow: 0 0 6px rgba(138,253,129,0.5);"></div>
                <div style="flex: 1; height: 10px; background: rgba(255,255,255,0.6); border-radius: 2px;"></div>
              </div>
              <div style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px;">
                <div style="width: 8px; height: 8px; background: #8AFD81; border-radius: 50%; flex-shrink: 0; box-shadow: 0 0 6px rgba(138,253,129,0.5);"></div>
                <div style="flex: 1; height: 10px; background: rgba(255,255,255,0.6); border-radius: 2px;"></div>
              </div>
              <div style="display: flex; gap: 12px; align-items: center;">
                <div style="width: 8px; height: 8px; background: #8AFD81; border-radius: 50%; flex-shrink: 0; box-shadow: 0 0 6px rgba(138,253,129,0.5);"></div>
                <div style="flex: 1; height: 10px; background: rgba(255,255,255,0.6); border-radius: 2px;"></div>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- Section Menu / Navigation -->
      <section class="token-section" id="menu">
        <div class="token-section__header">
          <h2 class="token-section__title">‚ò∞ Menu / Navigation</h2>
        </div>
        
        <!-- Full Width Menu Cards -->
        <div style="display: flex; flex-direction: column; gap: 16px; padding: 20px;">
          
          <!-- Top Navigation -->
          <div onclick="showComponentPreview('menu-top')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚ò∞ Top Navigation</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Barre horizontale ‚Ä¢ Menu principal en haut ‚Ä¢ Desktop first</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="background: var(--ds-bg-surface-2); border-radius: 8px; overflow: hidden;">
              <div style="display: flex; gap: 8px; padding: 16px; background: var(--ds-bg-surface-3); border-bottom: 1px solid rgba(138,253,129,0.2);">
                <div style="padding: 8px 16px; background: #8AFD81; border-radius: 6px; font-weight: 600; color: #0f172a; font-size: 14px;">Dashboard</div>
                <div style="padding: 8px 16px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 14px; color: var(--ds-text-secondary);">Projets</div>
                <div style="padding: 8px 16px; background: rgba(255,255,255,0.1); border-radius: 6px; font-size: 14px; color: var(--ds-text-secondary);">√âquipe</div>
              </div>
              <div style="padding: 24px; background: var(--ds-bg-canvas);">
                <div style="width: 70%; height: 12px; background: rgba(255,255,255,0.2); border-radius: 3px; margin-bottom: 8px;"></div>
                <div style="width: 50%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 2px;"></div>
              </div>
            </div>
          </div>

          <!-- Sidebar Navigation -->
          <div onclick="showComponentPreview('menu-sidebar')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìÇ Sidebar Navigation</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Menu lat√©ral ‚Ä¢ Navigation verticale ‚Ä¢ Plus d'espace contenu</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="display: flex; gap: 16px; background: var(--ds-bg-surface-2); border-radius: 8px; overflow: hidden; height: 180px;">
              <div style="width: 35%; background: var(--ds-bg-surface-3); padding: 16px; display: flex; flex-direction: column; gap: 10px;">
                <div style="padding: 12px; background: rgba(138,253,129,0.2); border-left: 3px solid #8AFD81; border-radius: 6px; font-size: 13px; color: var(--ds-text-primary); font-weight: 600;">üìä Dashboard</div>
                <div style="padding: 12px; background: rgba(255,255,255,0.05); border-left: 3px solid transparent; border-radius: 6px; font-size: 13px; color: var(--ds-text-secondary);">üìÅ Projets</div>
                <div style="padding: 12px; background: rgba(255,255,255,0.05); border-left: 3px solid transparent; border-radius: 6px; font-size: 13px; color: var(--ds-text-secondary);">‚öôÔ∏è R√©glages</div>
              </div>
              <div style="flex: 1; padding: 20px; background: var(--ds-bg-canvas);">
                <div style="width: 80%; height: 14px; background: rgba(255,255,255,0.2); border-radius: 3px; margin-bottom: 10px;"></div>
                <div style="width: 60%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 2px;"></div>
              </div>
            </div>
          </div>

          <!-- Mobile Navigation -->
          <div onclick="showComponentPreview('menu-mobile')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üì± Mobile Navigation</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Bottom Tab Bar ‚Ä¢ Navigation mobile ‚Ä¢ Ic√¥nes + labels</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="background: var(--ds-bg-surface-2); border-radius: 8px; overflow: hidden; max-width: 300px; margin: 0 auto;">
              <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; background: var(--ds-bg-surface-3); border-bottom: 1px solid rgba(138,253,129,0.2);">
                <div style="font-size: 18px;">‚ò∞</div>
                <div style="font-weight: 600; color: var(--ds-text-primary);">App Title</div>
                <div style="font-size: 18px;">üîî</div>
              </div>
              <div style="padding: 32px 20px; background: var(--ds-bg-canvas); height: 120px;">
                <div style="width: 100%; height: 10px; background: rgba(255,255,255,0.15); border-radius: 2px; margin-bottom: 8px;"></div>
                <div style="width: 80%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 2px;"></div>
              </div>
              <div style="display: flex; justify-content: space-around; align-items: center; padding: 12px 16px; background: var(--ds-bg-surface-3); border-top: 1px solid rgba(138,253,129,0.2);">
                <div style="text-align: center;">
                  <div style="width: 24px; height: 24px; background: rgba(255,255,255,0.2); border-radius: 50%; margin: 0 auto 4px;"></div>
                  <div style="font-size: 9px; color: var(--ds-text-tertiary);">Home</div>
                </div>
                <div style="text-align: center;">
                  <div style="width: 24px; height: 24px; background: #8AFD81; border-radius: 50%; margin: 0 auto 4px; box-shadow: 0 0 12px rgba(138,253,129,0.4);"></div>
                  <div style="font-size: 9px; color: #8AFD81; font-weight: 600;">Search</div>
                </div>
                <div style="text-align: center;">
                  <div style="width: 24px; height: 24px; background: rgba(255,255,255,0.2); border-radius: 50%; margin: 0 auto 4px;"></div>
                  <div style="font-size: 9px; color: var(--ds-text-tertiary);">Profile</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabs Navigation -->
          <div onclick="showComponentPreview('menu-tabs')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìë Tabs Navigation</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Onglets horizontaux ‚Ä¢ Sous-navigation ‚Ä¢ Contenu alternatif</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="background: var(--ds-bg-surface-2); border-radius: 8px; overflow: hidden;">
              <div style="display: flex; gap: 4px; padding: 12px; background: var(--ds-bg-surface-3); border-bottom: 2px solid rgba(138,253,129,0.1);">
                <div style="flex: 1; padding: 10px; background: rgba(138,253,129,0.2); border-bottom: 3px solid #8AFD81; border-radius: 6px 6px 0 0; font-size: 13px; font-weight: 600; text-align: center; color: var(--ds-text-primary);">Vue d'ensemble</div>
                <div style="flex: 1; padding: 10px; background: rgba(255,255,255,0.05); border-bottom: 3px solid transparent; border-radius: 6px 6px 0 0; font-size: 13px; text-align: center; color: var(--ds-text-secondary);">Statistiques</div>
                <div style="flex: 1; padding: 10px; background: rgba(255,255,255,0.05); border-bottom: 3px solid transparent; border-radius: 6px 6px 0 0; font-size: 13px; text-align: center; color: var(--ds-text-secondary);">Rapports</div>
              </div>
              <div style="padding: 20px; background: var(--ds-bg-canvas);">
                <div style="width: 75%; height: 12px; background: rgba(255,255,255,0.2); border-radius: 3px; margin-bottom: 8px;"></div>
                <div style="width: 55%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 2px;"></div>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- Section Forms / Login -->
      <section class="token-section" id="forms">
        <div class="token-section__header">
          <h2 class="token-section__title">üìù Forms / Login</h2>
        </div>
        
        <!-- Full Width Form Cards -->
        <div style="display: flex; flex-direction: column; gap: 16px; padding: 20px;">
          
          <!-- Login Form -->
          <div onclick="showComponentPreview('form-login')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üîê Login Form</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Formulaire de connexion ‚Ä¢ Email + Password ‚Ä¢ CTA vert</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 24px; background: var(--ds-bg-surface-2); border-radius: 8px; max-width: 400px; margin: 0 auto;">
              <div style="margin-bottom: 16px;">
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">EMAIL</div>
                <div style="padding: 12px; background: var(--ds-bg-surface-3); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-tertiary); font-size: 14px;">utilisateur@example.com</div>
              </div>
              <div style="margin-bottom: 20px;">
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">MOT DE PASSE</div>
                <div style="padding: 12px; background: var(--ds-bg-surface-3); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-tertiary); font-size: 14px;">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
              </div>
              <div style="padding: 14px; background: #8AFD81; border-radius: 8px; text-align: center; font-weight: 600; color: #0f172a; box-shadow: 0 4px 12px rgba(138,253,129,0.3);">
                Se connecter ‚Üí
              </div>
            </div>
          </div>

          <!-- Input Fields -->
          <div onclick="showComponentPreview('form-inputs')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìã Input Fields</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Champs de formulaire ‚Ä¢ Labels ‚Ä¢ √âtats focus</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border-radius: 8px; display: flex; flex-direction: column; gap: 14px;">
              <div>
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">NOM COMPLET</div>
                <div style="padding: 12px; background: var(--ds-bg-surface-3); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);">John Doe</div>
              </div>
              <div>
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">EMAIL</div>
                <div style="padding: 12px; background: var(--ds-bg-surface-3); border: 2px solid #8AFD81; border-radius: 6px; color: var(--ds-text-primary); box-shadow: 0 0 0 3px rgba(138,253,129,0.1);">john@example.com</div>
              </div>
              <div>
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">T√âL√âPHONE</div>
                <div style="padding: 12px; background: var(--ds-bg-surface-3); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-tertiary);">+33 6 12 34 56 78</div>
              </div>
            </div>
          </div>

          <!-- Search Bar -->
          <div onclick="showComponentPreview('form-search')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üîç Search Bar</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Barre de recherche ‚Ä¢ Bordure focus verte ‚Ä¢ Ic√¥ne loupe</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border-radius: 8px; max-width: 500px; margin: 0 auto;">
              <div style="display: flex; align-items: center; gap: 12px; padding: 14px 18px; background: var(--ds-bg-surface-3); border: 2px solid #8AFD81; border-radius: 24px; box-shadow: 0 0 0 4px rgba(138,253,129,0.1);">
                <div style="font-size: 18px; opacity: 0.7;">üîç</div>
                <div style="flex: 1; color: var(--ds-text-secondary); font-size: 14px;">Rechercher palettes, composants...</div>
                <div style="padding: 4px 12px; background: rgba(138,253,129,0.2); border-radius: 12px; font-size: 11px; color: #8AFD81; font-weight: 600;">‚åòK</div>
              </div>
            </div>
          </div>

          <!-- Select / Dropdown -->
          <div onclick="showComponentPreview('form-select')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üìë Select / Dropdown</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Menu d√©roulant ‚Ä¢ S√©lection multiple ‚Ä¢ Options stylis√©es</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px; background: var(--ds-bg-surface-2); border-radius: 8px;">
              <div style="margin-bottom: 12px;">
                <div style="font-size: 11px; color: var(--ds-text-secondary); margin-bottom: 6px; font-weight: 600;">S√âLECTIONNER UNE PALETTE</div>
                <div style="padding: 12px 16px; background: var(--ds-bg-surface-3); border: 1px solid var(--ds-border-default); border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: var(--ds-text-tertiary);">Choisir une option...</span>
                  <span style="font-size: 10px;">‚ñº</span>
                </div>
              </div>
              <div style="padding: 16px; background: var(--ds-bg-surface-3); border: 2px solid #8AFD81; border-radius: 8px; box-shadow: 0 8px 24px rgba(0,0,0,0.3);">
                <div style="padding: 10px 12px; background: rgba(138,253,129,0.2); border-left: 3px solid #8AFD81; border-radius: 4px; margin-bottom: 6px; color: var(--ds-text-primary); font-size: 14px;">Hearst Qatar ‚úì</div>
                <div style="padding: 10px 12px; background: transparent; border-left: 3px solid transparent; border-radius: 4px; margin-bottom: 6px; color: var(--ds-text-secondary); font-size: 14px;">Dark Pro</div>
                <div style="padding: 10px 12px; background: transparent; border-left: 3px solid transparent; border-radius: 4px; color: var(--ds-text-secondary); font-size: 14px;">Light Clean</div>
              </div>
            </div>
          </div>

        </div>
      </section>

      <!-- Section Alerts / Badges -->
      <section class="token-section" id="alerts">
        <div class="token-section__header">
          <h2 class="token-section__title">üîî Alerts / Badges</h2>
        </div>
        
        <!-- Full Width Alert Cards -->
        <div style="display: flex; flex-direction: column; gap: 16px; padding: 20px;">
          
          <!-- Success Alert -->
          <div onclick="showComponentPreview('alert-success')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚úÖ Success Alert</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Message de succ√®s ‚Ä¢ Bordure gauche verte ‚Ä¢ Fond subtil</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px 24px; background: rgba(16, 185, 129, 0.15); border-left: 4px solid #8AFD81; border-radius: 8px; display: flex; align-items: center; gap: 16px;">
              <div style="font-size: 28px; color: #8AFD81;">‚úì</div>
              <div>
                <div style="font-weight: 600; color: #8AFD81; margin-bottom: 4px; font-size: 15px;">Op√©ration r√©ussie !</div>
                <div style="color: var(--ds-text-secondary); font-size: 13px;">Vos modifications ont √©t√© sauvegard√©es avec succ√®s.</div>
              </div>
            </div>
          </div>

          <!-- Warning Alert -->
          <div onclick="showComponentPreview('alert-warning')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚ö†Ô∏è Warning Alert</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Avertissement ‚Ä¢ Orange/Ambre ‚Ä¢ Attention utilisateur</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px 24px; background: rgba(245, 158, 11, 0.15); border-left: 4px solid #f59e0b; border-radius: 8px; display: flex; align-items: center; gap: 16px;">
              <div style="font-size: 28px; color: #f59e0b;">‚ö†</div>
              <div>
                <div style="font-weight: 600; color: #f59e0b; margin-bottom: 4px; font-size: 15px;">Attention requise</div>
                <div style="color: var(--ds-text-secondary); font-size: 13px;">Cette action n√©cessite une v√©rification suppl√©mentaire.</div>
              </div>
            </div>
          </div>

          <!-- Error Alert -->
          <div onclick="showComponentPreview('alert-error')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">‚ùå Error Alert</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Message d'erreur ‚Ä¢ Rouge critique ‚Ä¢ Action √©chou√©e</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 20px 24px; background: rgba(239, 68, 68, 0.15); border-left: 4px solid #ef4444; border-radius: 8px; display: flex; align-items: center; gap: 16px;">
              <div style="font-size: 28px; color: #ef4444;">‚úï</div>
              <div>
                <div style="font-weight: 600; color: #ef4444; margin-bottom: 4px; font-size: 15px;">Erreur d√©tect√©e</div>
                <div style="color: var(--ds-text-secondary); font-size: 13px;">Impossible de traiter la requ√™te. Veuillez r√©essayer.</div>
              </div>
            </div>
          </div>

          <!-- Info Badge -->
          <div onclick="showComponentPreview('badge-status')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üè∑Ô∏è Status Badges</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Badges de statut ‚Ä¢ Pills color√©es ‚Ä¢ Live, Warning, Error</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="padding: 24px; background: var(--ds-bg-surface-2); border-radius: 8px; display: flex; flex-wrap: wrap; gap: 12px; align-items: center;">
              <div style="padding: 8px 16px; background: #8AFD81; border-radius: 16px; font-size: 13px; font-weight: 600; color: #0f172a; box-shadow: 0 2px 8px rgba(138,253,129,0.3);">
                üü¢ Live
              </div>
              <div style="padding: 8px 16px; background: #f59e0b; border-radius: 16px; font-size: 13px; font-weight: 600; color: #0f172a; box-shadow: 0 2px 8px rgba(245,158,11,0.3);">
                ‚ö†Ô∏è Warning
              </div>
              <div style="padding: 8px 16px; background: #ef4444; border-radius: 16px; font-size: 13px; font-weight: 600; color: white; box-shadow: 0 2px 8px rgba(239,68,68,0.3);">
                üî¥ Offline
              </div>
              <div style="padding: 8px 16px; background: #3b82f6; border-radius: 16px; font-size: 13px; font-weight: 600; color: white; box-shadow: 0 2px 8px rgba(59,130,246,0.3);">
                ‚ÑπÔ∏è Info
              </div>
              <div style="padding: 8px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 16px; font-size: 13px; font-weight: 600; color: var(--ds-text-secondary);">
                ‚è∏Ô∏è Paused
              </div>
            </div>
          </div>

          <!-- Toast Notification -->
          <div onclick="showComponentPreview('notification')" style="
            width: 100%;
            padding: 24px;
            background: var(--ds-bg-surface-1);
            border: 2px solid var(--ds-border-default);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
          " onmouseover="this.style.borderColor='#8AFD81'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 24px rgba(138, 253, 129, 0.2)'" onmouseout="this.style.borderColor='var(--ds-border-default)'; this.style.transform='translateY(0)'; this.style.boxShadow='none'">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
              <div>
                <div style="font-weight: 700; font-size: 18px; color: var(--ds-text-primary); margin-bottom: 6px;">üîî Toast Notification</div>
                <div style="font-size: 13px; color: var(--ds-text-secondary);">Notification non-intrusive ‚Ä¢ Bottom-right ‚Ä¢ Auto-dismiss</div>
              </div>
              <div style="font-size: 24px; color: #8AFD81;">‚Üí</div>
            </div>
            <div style="max-width: 380px; margin-left: auto; padding: 18px 20px; background: var(--ds-bg-surface-2); border: 1px solid rgba(138,253,129,0.3); border-radius: 10px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); position: relative;">
              <div style="position: absolute; top: 8px; right: 8px; width: 10px; height: 10px; background: #8AFD81; border-radius: 50%; box-shadow: 0 0 8px rgba(138,253,129,0.6);"></div>
              <div style="display: flex; gap: 14px; align-items: start;">
                <div style="font-size: 24px; color: #8AFD81; flex-shrink: 0;">‚úì</div>
                <div style="flex: 1;">
                  <div style="font-weight: 600; color: var(--ds-text-primary); margin-bottom: 4px; font-size: 14px;">Configuration appliqu√©e !</div>
                  <div style="color: var(--ds-text-secondary); font-size: 12px; line-height: 1.5;">Style Hearst Qatar : hearst-qatar ‚Ä¢ modern ‚Ä¢ comfortable</div>
                </div>
                <button style="background: none; border: none; color: var(--ds-text-tertiary); font-size: 18px; cursor: pointer; padding: 0; line-height: 1;">√ó</button>
              </div>
            </div>
          </div>

        </div>
      </section>
    </aside>

    <!-- Zone de preview -->
    <main class="preview-zone">
      <!-- Pages tabs bar -->
      <div class="pages-bar" id="pagesBar">
        <!-- Les onglets de pages seront inject√©s ici -->
      </div>
      
      <!-- Page content wrapper -->
      <div class="page-content-wrapper" id="pageContentWrapper">
        <!-- Les templates de pages seront inject√©s ici -->
      </div>
    </main>
  </div>

  <!-- Toast Notifications Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Theme Manager Modal (Save/Load) -->
  <div class="modal-overlay" id="themeModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="themeModalTitle">
      <div class="modal__header">
        <h2 class="modal__title" id="themeModalTitle">üíæ Themes</h2>
        <button class="modal__close" type="button" aria-label="Fermer" onclick="closeThemeModal()">√ó</button>
      </div>
      
      <div class="modal__body" id="themeModalBody">
        <!-- Inject√© dynamiquement -->
      </div>
      
      <div class="modal__footer" id="themeModalFooter">
        <button class="ds-btn ds-btn--secondary" type="button" onclick="closeThemeModal()">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Modal Popup pour palette d√©taill√©e -->
  <div class="modal-overlay" id="paletteModal">
    <div class="modal">
      <div class="modal__header">
        <h2 class="modal__title" id="modalTitle">Palette Dark Pro</h2>
        <button class="modal__close" onclick="closePaletteModal()">√ó</button>
      </div>
      
      <div class="modal__body" id="modalBody">
        <!-- Le contenu sera inject√© dynamiquement -->
      </div>
      
      <div class="modal__footer">
        <button class="ds-btn ds-btn--secondary" onclick="closePaletteModal()">Retour</button>
        <button class="ds-btn ds-btn--primary" onclick="applyPalette()">Appliquer</button>
      </div>
    </div>
  </div>

  <script>
    // ==================== TOAST NOTIFICATION SYSTEM ====================
    
    function showToast(type, title, message, duration = 4000) {
      const container = document.getElementById('toastContainer');
      const toast = document.createElement('div');
      toast.className = `toast toast--${type}`;
      
      const icons = {
        success: '‚úÖ',
        error: '‚ùå',
        warning: '‚ö†Ô∏è',
        info: '‚ÑπÔ∏è'
      };
      
      toast.innerHTML = `
        <div class="toast__icon">${icons[type]}</div>
        <div class="toast__content">
          <div class="toast__title">${title}</div>
          ${message ? `<div class="toast__message">${message}</div>` : ''}
        </div>
        <button class="toast__close" onclick="this.parentElement.remove()">√ó</button>
      `;
      
      container.appendChild(toast);
      
      // Auto remove after duration
      if (duration > 0) {
        setTimeout(() => {
          toast.style.animation = 'slideOutRight 0.3s cubic-bezier(0.2, 0.0, 0.0, 1.0)';
          setTimeout(() => toast.remove(), 300);
        }, duration);
      }
    }

    // ==================== THEME MANAGER MODAL (SAVE/LOAD) ====================
    
    let lastFocusedBeforeThemeModal = null;
    let editingThemeIndex = null;
    let pendingDeleteThemeIndex = null;
    
    function getSavedThemes() {
      try {
        return JSON.parse(localStorage.getItem('hearst_themes') || '[]');
      } catch {
        return [];
      }
    }
    
    function setSavedThemes(themes) {
      localStorage.setItem('hearst_themes', JSON.stringify(themes));
    }
    
    function openThemeModal(mode = 'manage') {
      const modal = document.getElementById('themeModal');
      const body = document.getElementById('themeModalBody');
      const footer = document.getElementById('themeModalFooter');
      const title = document.getElementById('themeModalTitle');
      if (!modal || !body || !footer || !title) return;
      
      lastFocusedBeforeThemeModal = document.activeElement;
      
      if (mode === 'save') {
        title.textContent = 'üíæ Sauvegarder le th√®me';
        const current = palettes[currentPalette];
        const defaultName = (current && current.name) ? current.name : 'Mon th√®me';
        editingThemeIndex = null;
        pendingDeleteThemeIndex = null;
        
        body.innerHTML = `
          <div style="display:flex; flex-direction:column; gap:12px;">
            <div class="ds-text" style="color: var(--ds-text-secondary); font-size: 13px;">
              Donnez un nom √† votre th√®me. Il sera stock√© dans ce navigateur (localStorage).
            </div>
            <div>
              <label for="themeNameInput" style="display:block; font-weight:600; margin-bottom:8px;">Nom du th√®me</label>
              <input id="themeNameInput" type="text" value="${String(defaultName).replace(/"/g, '&quot;')}"
                     style="width:100%; padding:10px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);">
            </div>
          </div>
        `;
        
        footer.innerHTML = `
          <button class="ds-btn ds-btn--secondary" type="button" onclick="closeThemeModal()">Annuler</button>
          <button class="ds-btn ds-btn--primary" type="button" onclick="saveThemeFromModal()">Sauvegarder</button>
        `;
      } else {
        title.textContent = 'üìö Themes sauvegard√©s';
        editingThemeIndex = null;
        pendingDeleteThemeIndex = null;
        renderThemeList();
        footer.innerHTML = `
          <button class="ds-btn ds-btn--secondary" type="button" onclick="closeThemeModal()">Fermer</button>
        `;
      }
      
      modal.classList.add('is-visible');
      modal.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
      
      // Focus management
      setTimeout(() => {
        const firstFocusable =
          modal.querySelector('#themeNameInput') ||
          modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (firstFocusable) firstFocusable.focus();
      }, 0);
    }
    
    function closeThemeModal() {
      const modal = document.getElementById('themeModal');
      if (!modal) return;
      modal.classList.remove('is-visible');
      modal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
      
      if (lastFocusedBeforeThemeModal && typeof lastFocusedBeforeThemeModal.focus === 'function') {
        lastFocusedBeforeThemeModal.focus();
      }
      lastFocusedBeforeThemeModal = null;
    }
    
    function renderThemeList() {
      const body = document.getElementById('themeModalBody');
      if (!body) return;
      
      const savedThemes = getSavedThemes();
      if (savedThemes.length === 0) {
        body.innerHTML = `
          <div class="ds-text" style="color: var(--ds-text-secondary); font-size: 13px;">
            Aucun th√®me sauvegard√© pour l‚Äôinstant.
          </div>
        `;
        return;
      }
      
      body.innerHTML = `
        <div style="display:flex; flex-direction:column; gap:10px;">
          ${savedThemes.map((t, idx) => {
            const date = t.timestamp ? new Date(t.timestamp).toLocaleString() : '';
            const rawName = String(t.name || `Th√®me ${idx + 1}`);
            const safeName = rawName.replace(/</g, '&lt;').replace(/>/g, '&gt;');
            const safeValue = rawName.replace(/"/g, '&quot;');
            const isEditing = idx === editingThemeIndex;
            const isDeleting = idx === pendingDeleteThemeIndex;
            return `
              <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 10px;">
                <div style="min-width:0;">
                  ${
                    isEditing
                      ? `<label style="display:block; font-size:12px; color: var(--ds-text-tertiary); margin-bottom:6px;">Renommer</label>
                         <input id="renameThemeInput-${idx}" type="text" value="${safeValue}"
                                style="width:100%; padding:8px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);">`
                      : `<div style="font-weight:600; color: var(--ds-text-primary); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;">${safeName}</div>`
                  }
                  <div style="font-size:12px; color: var(--ds-text-tertiary);">${date}</div>
                </div>
                <div style="display:flex; gap:8px; flex-wrap:wrap;">
                  ${
                    isEditing
                      ? `
                        <button class="ds-btn ds-btn--secondary" type="button" onclick="cancelRenameTheme()" style="font-size:12px; padding:8px 12px;">Annuler</button>
                        <button class="ds-btn ds-btn--primary" type="button" onclick="saveRenameTheme(${idx})" style="font-size:12px; padding:8px 12px;">Enregistrer</button>
                      `
                      : isDeleting
                        ? `
                          <button class="ds-btn ds-btn--secondary" type="button" onclick="cancelDeleteTheme()" style="font-size:12px; padding:8px 12px;">Annuler</button>
                          <button class="ds-btn ds-btn--primary" type="button" onclick="confirmDeleteTheme(${idx})" style="font-size:12px; padding:8px 12px;">Confirmer</button>
                        `
                        : `
                          <button class="ds-btn ds-btn--secondary" type="button" onclick="startRenameTheme(${idx})" style="font-size:12px; padding:8px 12px;">Renommer</button>
                          <button class="ds-btn ds-btn--secondary" type="button" onclick="requestDeleteTheme(${idx})" style="font-size:12px; padding:8px 12px;">Supprimer</button>
                          <button class="ds-btn ds-btn--primary" type="button" onclick="loadThemeByIndex(${idx})" style="font-size:12px; padding:8px 12px;">Charger</button>
                        `
                  }
                </div>
              </div>
            `;
          }).join('')}
        </div>
      `;
    }
    
    function saveThemeFromModal() {
      const input = document.getElementById('themeNameInput');
      const name = (input && input.value) ? input.value.trim() : '';
      if (!name) {
        showToast('warning', 'Nom requis', 'Veuillez entrer un nom pour sauvegarder le th√®me.');
        if (input) input.focus();
        return;
      }
      
      const palette = palettes[currentPalette];
      const themeData = {
        name,
        palette: currentPalette,
        timestamp: new Date().toISOString(),
        tokens: palette
      };
      
      const savedThemes = getSavedThemes();
      savedThemes.push(themeData);
      setSavedThemes(savedThemes);
      
      showToast('success', 'Th√®me sauvegard√© !', `"${name}" a √©t√© sauvegard√© avec succ√®s`);
      closeThemeModal();
      
      const menu = document.getElementById('saveLoadMenu');
      if (menu) menu.classList.remove('is-open');
    }
    
    function loadThemeByIndex(index) {
      const savedThemes = getSavedThemes();
      const theme = savedThemes[index];
      if (!theme || !theme.palette) return;
      
      applyPaletteDirectly(theme.palette);
      showToast('success', 'Th√®me charg√© !', `"${theme.name}" a √©t√© appliqu√© avec succ√®s`);
      closeThemeModal();
      
      const menu = document.getElementById('saveLoadMenu');
      if (menu) menu.classList.remove('is-open');
    }
    
    function requestDeleteTheme(index) {
      pendingDeleteThemeIndex = index;
      editingThemeIndex = null;
      renderThemeList();
    }
    
    function cancelDeleteTheme() {
      pendingDeleteThemeIndex = null;
      renderThemeList();
    }
    
    function confirmDeleteTheme(index) {
      const savedThemes = getSavedThemes();
      const theme = savedThemes[index];
      if (!theme) return;
      
      savedThemes.splice(index, 1);
      setSavedThemes(savedThemes);
      pendingDeleteThemeIndex = null;
      renderThemeList();
      showToast('success', 'Supprim√©', `"${theme.name}" a √©t√© supprim√©`);
    }
    
    function startRenameTheme(index) {
      editingThemeIndex = index;
      pendingDeleteThemeIndex = null;
      renderThemeList();
      
      setTimeout(() => {
        const input = document.getElementById(`renameThemeInput-${index}`);
        if (input) {
          input.focus();
          input.select?.();
        }
      }, 0);
    }
    
    function cancelRenameTheme() {
      editingThemeIndex = null;
      renderThemeList();
    }
    
    function saveRenameTheme(index) {
      const input = document.getElementById(`renameThemeInput-${index}`);
      const newName = (input && input.value) ? input.value.trim() : '';
      if (!newName) {
        showToast('warning', 'Nom requis', 'Veuillez entrer un nom.');
        if (input) input.focus();
        return;
      }
      
      const savedThemes = getSavedThemes();
      const theme = savedThemes[index];
      if (!theme) return;
      
      theme.name = newName;
      setSavedThemes(savedThemes);
      editingThemeIndex = null;
      renderThemeList();
      showToast('success', 'Renomm√©', `Th√®me renomm√© en "${theme.name}"`);
    }
    
    // Focus trap inside theme modal
    document.addEventListener('keydown', (e) => {
      const modal = document.getElementById('themeModal');
      if (!modal || !modal.classList.contains('is-visible')) return;
      
      if (e.key === 'Tab') {
        const focusables = Array.from(modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))
          .filter(el => !el.hasAttribute('disabled') && el.getAttribute('aria-hidden') !== 'true');
        if (focusables.length === 0) return;
        
        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        
        if (e.shiftKey && document.activeElement === first) {
          e.preventDefault();
          last.focus();
        } else if (!e.shiftKey && document.activeElement === last) {
          e.preventDefault();
          first.focus();
        }
      }
    });
    
    // Close theme modal on overlay click
    document.getElementById('themeModal')?.addEventListener('click', (e) => {
      if (e.target && e.target.id === 'themeModal') closeThemeModal();
    });
    
    // ==================== KEYBOARD SHORTCUTS ====================
    
    document.addEventListener('keydown', (e) => {
      // Ctrl/Cmd + S : Save theme
      if ((e.ctrlKey || e.metaKey) && e.key === 's') {
        e.preventDefault();
        saveTheme();
      }
      
      // Ctrl/Cmd + E : Export theme
      if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
        e.preventDefault();
        exportTheme();
      }
      
      // Ctrl/Cmd + K : Focus search
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        document.getElementById('searchInput').focus();
      }
      
      // Escape : Close modal
      if (e.key === 'Escape') {
        closePaletteModal();
        closeThemeModal();
        const dropdown = document.getElementById('saveLoadMenu');
        if (dropdown) dropdown.classList.remove('is-open');
      }
    });
    
    // ==================== LOADING STATE HELPER ====================
    
    function setButtonLoading(button, isLoading) {
      if (isLoading) {
        button.classList.add('btn-loading');
        button.disabled = true;
      } else {
        button.classList.remove('btn-loading');
        button.disabled = false;
      }
    }
    
    // D√©finition des palettes
    const palettes = {
      'hearst-qatar': {
        name: 'Hearst Qatar',
        gradient: 'radial-gradient(ellipse at top, #1e293b 0%, #0f172a 50%, #020617 100%)',
        background: {
          bgPrimary: '#0f172a',        // slate-900
          bgSecondary: '#1e293b',      // slate-800
          bgTertiary: '#334155',       // slate-700
          bgCard: 'rgba(255, 255, 255, 0.1)',        // white/10 glassmorphism
          bgCardHover: 'rgba(255, 255, 255, 0.15)'   // white/15 glassmorphism
        },
        text: {
          textPrimary: '#ffffff',           // white
          textSecondary: 'rgba(255, 255, 255, 0.6)',  // white/60
          textTertiary: 'rgba(255, 255, 255, 0.4)',   // white/40
          textMuted: 'rgba(255, 255, 255, 0.3)'       // white/30
        },
        accents: {
          accentPrimary: '#8AFD81',      // Hearst Green
          accentSecondary: '#7AED71',    // Hearst Green Hover
          accentTertiary: '#6ADD61'      // Hearst Green Dark
        },
        borders: {
          borderDefault: 'rgba(255, 255, 255, 0.2)',   // white/20
          borderGreen: 'rgba(138, 253, 129, 0.3)'      // hearst-green/30
        },
        effects: {
          glowGreen: 'rgba(138, 253, 129, 0.05)',      // green/5 for large blur
          glowGreenMedium: 'rgba(138, 253, 129, 0.2)', // green/20 for backgrounds
          shadowGreen: '0 0 40px rgba(138, 253, 129, 0.2)',
          shadowMd: '0 4px 16px rgba(0, 0, 0, 0.2)',
          shadowLg: '0 8px 32px rgba(0, 0, 0, 0.3)'
        },
        semantic: {
          success: '#27ae60',
          error: '#e74c3c',
          warning: '#f39c12',
          info: '#3498db'
        }
      },
      'dark-pro': {
        name: 'Dark Pro',
        gradient: 'radial-gradient(ellipse at top, #1e293b 0%, #0f172a 50%, #020617 100%)',
        background: {
          bgPrimary: '#0f172a',
          bgSecondary: '#1e293b',
          bgTertiary: '#334155',
          bgCard: 'rgba(30, 41, 59, 0.5)',
          bgCardHover: 'rgba(30, 41, 59, 0.7)'
        },
        text: {
          textPrimary: '#f8fafc',
          textSecondary: '#e2e8f0',
          textTertiary: '#cbd5e1',
          textMuted: '#94a3b8'
        },
        accents: {
          accentPrimary: '#10b981',
          accentSecondary: '#14b8a6',
          accentTertiary: '#06b6d4'
        }
      },
      'light-clean': {
        name: 'Light Clean',
        gradient: 'radial-gradient(ellipse at top, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%)',
        background: {
          bgPrimary: '#ffffff',
          bgSecondary: '#f1f5f9',
          bgTertiary: '#e2e8f0',
          bgCard: 'rgba(241, 245, 249, 0.8)',
          bgCardHover: 'rgba(226, 232, 240, 0.9)'
        },
        text: {
          textPrimary: '#0f172a',
          textSecondary: '#334155',
          textTertiary: '#64748b',
          textMuted: '#94a3b8'
        },
        accents: {
          accentPrimary: '#0ea5e9',
          accentSecondary: '#3b82f6',
          accentTertiary: '#8b5cf6'
        }
      },
      'blue-tech': {
        name: 'Blue Tech',
        gradient: 'radial-gradient(ellipse at top, #075985 0%, #0c4a6e 50%, #082f49 100%)',
        background: {
          bgPrimary: '#0c4a6e',
          bgSecondary: '#075985',
          bgTertiary: '#0369a1',
          bgCard: 'rgba(7, 89, 133, 0.5)',
          bgCardHover: 'rgba(7, 89, 133, 0.7)'
        },
        text: {
          textPrimary: '#e0f2fe',
          textSecondary: '#bae6fd',
          textTertiary: '#7dd3fc',
          textMuted: '#38bdf8'
        },
        accents: {
          accentPrimary: '#06b6d4',
          accentSecondary: '#0ea5e9',
          accentTertiary: '#3b82f6'
        }
      },
      'green-mining': {
        name: 'Green Mining',
        gradient: 'radial-gradient(ellipse at top, #14532d 0%, #052e16 50%, #022c22 100%)',
        background: {
          bgPrimary: '#052e16',
          bgSecondary: '#14532d',
          bgTertiary: '#166534',
          bgCard: 'rgba(20, 83, 45, 0.5)',
          bgCardHover: 'rgba(20, 83, 45, 0.7)'
        },
        text: {
          textPrimary: '#dcfce7',
          textSecondary: '#bbf7d0',
          textTertiary: '#86efac',
          textMuted: '#4ade80'
        },
        accents: {
          accentPrimary: '#22c55e',
          accentSecondary: '#10b981',
          accentTertiary: '#14b8a6'
        }
      }
    };

    let currentPalette = 'dark-pro';
    let paletteInModal = null;

    // Preview templates pour chaque composant
    const componentPreviews = {
      'card-basic': `
        <h2>Card Basic</h2>
        <div style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
          <div class="demo">
            <h3 style="margin-top: 0;">Titre de la card</h3>
            <p style="color: var(--ds-text-secondary);">
              Contenu de la card avec texte descriptif. Les cards basiques ont un fond simple et des bordures subtiles.
            </p>
            <button class="ds-btn ds-btn--primary" style="margin-top: 12px;">Action</button>
          </div>
          <div class="demo">
            <h3 style="margin-top: 0;">Mining Stats</h3>
            <div class="ds-kpi">
              <div class="ds-kpi__label">Hashrate</div>
              <div class="ds-kpi__value">5.98 EH/s</div>
              <div class="ds-kpi__meta">Live</div>
            </div>
          </div>
          <div class="demo">
            <h3 style="margin-top: 0;">Quick Info</h3>
            <p style="color: var(--ds-text-secondary); font-size: 14px; margin: 0;">
              87.7 MW ‚Ä¢ 17,864 miners<br/>
              Uptime: 99.8%
            </p>
          </div>
        </div>
      `,
      'card-gradient': `
        <h2>Card Gradient</h2>
        <div style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
          <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); padding: 24px; border-radius: 12px; border: 1px solid var(--ds-border-default);">
            <h3 style="margin-top: 0; background: linear-gradient(135deg, #10b981 0%, #14b8a6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Premium Feature</h3>
            <p style="color: var(--ds-text-secondary);">
              Cards avec d√©grad√© pour mettre en avant du contenu premium ou important.
            </p>
            <button class="ds-btn ds-btn--primary" style="margin-top: 12px;">Upgrade</button>
          </div>
          <div style="background: linear-gradient(135deg, #0c4a6e 0%, #075985 100%); padding: 24px; border-radius: 12px;">
            <h3 style="margin-top: 0; color: #e0f2fe;">Blue Theme</h3>
            <p style="color: #bae6fd;">
              Variante bleue du d√©grad√© pour diversifier les styles.
            </p>
          </div>
        </div>
      `,
      'card-bordered': `
        <h2>Card Border</h2>
        <div style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
          <div style="background: var(--ds-bg-surface-1); padding: 24px; border-radius: 12px; border: 2px solid var(--ds-green-400);">
            <h3 style="margin-top: 0; color: var(--ds-green-400);">‚úì Active</h3>
            <p style="color: var(--ds-text-secondary);">
              Card avec bordure color√©e pour indiquer un √©tat actif ou s√©lectionn√©.
            </p>
          </div>
          <div style="background: var(--ds-bg-surface-1); padding: 24px; border-radius: 12px; border: 2px solid #ef4444;">
            <h3 style="margin-top: 0; color: #ef4444;">‚úï Error</h3>
            <p style="color: var(--ds-text-secondary);">
              Card avec bordure rouge pour signaler une erreur ou un probl√®me.
            </p>
          </div>
          <div style="background: var(--ds-bg-surface-1); padding: 24px; border-radius: 12px; border: 2px solid #f59e0b;">
            <h3 style="margin-top: 0; color: #f59e0b;">‚ö† Warning</h3>
            <p style="color: var(--ds-text-secondary);">
              Card avec bordure orange pour les avertissements.
            </p>
          </div>
        </div>
      `,
      'card-glass': `
        <h2>Card Glass (Glassmorphism)</h2>
        <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); padding: 40px; border-radius: 12px;">
          <div style="display: grid; gap: 20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
            <div style="background: rgba(255,255,255,0.05); backdrop-filter: blur(10px); padding: 24px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
              <h3 style="margin-top: 0;">Glass Effect</h3>
              <p style="color: var(--ds-text-secondary);">
                Effet de verre avec transparence et flou pour un design moderne et √©l√©gant.
              </p>
            </div>
            <div style="background: rgba(16,185,129,0.1); backdrop-filter: blur(10px); padding: 24px; border-radius: 12px; border: 1px solid rgba(16,185,129,0.3);">
              <h3 style="margin-top: 0; color: var(--ds-green-400);">Colored Glass</h3>
              <p style="color: var(--ds-text-secondary);">
                Variante avec teinte de couleur.
              </p>
            </div>
          </div>
        </div>
      `,
      'menu-top': `
        <h2>Top Navigation</h2>
        <div style="background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 8px; overflow: hidden;">
          <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px 24px; background: var(--ds-bg-surface-2); border-bottom: 1px solid var(--ds-border-default);">
            <div style="font-weight: 700; font-size: 20px;">LOGO</div>
            <div style="display: flex; gap: 24px;">
              <a href="#" style="color: var(--ds-green-400); text-decoration: none; font-weight: 600;">Home</a>
              <a href="#" style="color: var(--ds-text-secondary); text-decoration: none;">Products</a>
              <a href="#" style="color: var(--ds-text-secondary); text-decoration: none;">About</a>
              <a href="#" style="color: var(--ds-text-secondary); text-decoration: none;">Contact</a>
            </div>
            <button class="ds-btn ds-btn--primary">Login</button>
          </div>
          <div style="padding: 40px 24px; text-align: center;">
            <h3>Page Content</h3>
            <p style="color: var(--ds-text-secondary);">Le menu est fixe en haut de la page.</p>
          </div>
        </div>
      `,
      'menu-sidebar': `
        <h2>Sidebar Navigation</h2>
        <div style="display: flex; height: 400px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 8px; overflow: hidden;">
          <div style="width: 240px; background: var(--ds-bg-surface-2); border-right: 1px solid var(--ds-border-default); padding: 20px;">
            <div style="font-weight: 700; margin-bottom: 24px;">MENU</div>
            <div style="display: flex; flex-direction: column; gap: 8px;">
              <div style="padding: 10px 12px; background: rgba(16,185,129,0.12); border-radius: 6px; color: var(--ds-green-400); font-weight: 600;">Dashboard</div>
              <div style="padding: 10px 12px; border-radius: 6px; color: var(--ds-text-secondary);">Analytics</div>
              <div style="padding: 10px 12px; border-radius: 6px; color: var(--ds-text-secondary);">Settings</div>
              <div style="padding: 10px 12px; border-radius: 6px; color: var(--ds-text-secondary);">Profile</div>
            </div>
          </div>
          <div style="flex: 1; padding: 24px;">
            <h3 style="margin-top: 0;">Main Content</h3>
            <p style="color: var(--ds-text-secondary);">La sidebar est fixe sur le c√¥t√© gauche.</p>
          </div>
        </div>
      `,
      'menu-mobile': `
        <h2>Mobile Navigation</h2>
        <div style="width: 375px; margin: 0 auto; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px; overflow: hidden;">
          <div style="padding: 16px; background: var(--ds-bg-surface-2); display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--ds-border-default);">
            <div style="font-weight: 700;">LOGO</div>
            <button style="width: 40px; height: 40px; background: none; border: none; color: var(--ds-text-primary); font-size: 24px; cursor: pointer;">‚ò∞</button>
          </div>
          <div style="padding: 40px 20px; text-align: center;">
            <h3>Content</h3>
          </div>
          <div style="display: flex; justify-content: space-around; padding: 16px; background: var(--ds-bg-surface-2); border-top: 1px solid var(--ds-border-default);">
            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--ds-green-400);">
              <div style="width: 24px; height: 24px; background: var(--ds-green-400); border-radius: 50%;"></div>
              <span style="font-size: 11px;">Home</span>
            </div>
            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--ds-text-secondary);">
              <div style="width: 24px; height: 24px; background: var(--ds-text-secondary); border-radius: 50%;"></div>
              <span style="font-size: 11px;">Search</span>
            </div>
            <div style="display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--ds-text-secondary);">
              <div style="width: 24px; height: 24px; background: var(--ds-text-secondary); border-radius: 50%;"></div>
              <span style="font-size: 11px;">Profile</span>
            </div>
          </div>
        </div>
      `,
      'menu-tabs': `
        <h2>Tabs Navigation</h2>
        <div style="background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 8px; padding: 20px;">
          <div style="display: flex; gap: 8px; border-bottom: 2px solid var(--ds-border-default); margin-bottom: 24px;">
            <button style="padding: 12px 24px; background: none; border: none; border-bottom: 2px solid var(--ds-green-400); margin-bottom: -2px; color: var(--ds-green-400); font-weight: 600; cursor: pointer;">Overview</button>
            <button style="padding: 12px 24px; background: none; border: none; color: var(--ds-text-secondary); cursor: pointer;">Analytics</button>
            <button style="padding: 12px 24px; background: none; border: none; color: var(--ds-text-secondary); cursor: pointer;">Reports</button>
            <button style="padding: 12px 24px; background: none; border: none; color: var(--ds-text-secondary); cursor: pointer;">Settings</button>
          </div>
          <div style="padding: 20px;">
            <h3 style="margin-top: 0;">Tab Content: Overview</h3>
            <p style="color: var(--ds-text-secondary);">Le contenu change en fonction de l'onglet s√©lectionn√©.</p>
          </div>
        </div>
      `,
      'form-login': `
        <h2>Login Form</h2>
        <div style="max-width: 400px; margin: 0 auto; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px; padding: 32px;">
          <h3 style="margin-top: 0; text-align: center;">Connexion</h3>
          <form style="display: flex; flex-direction: column; gap: 16px;">
            <div>
              <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Email</label>
              <input type="email" placeholder="votre@email.com" style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary); font-size: 14px;" />
            </div>
            <div>
              <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Mot de passe</label>
              <input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary); font-size: 14px;" />
            </div>
            <button class="ds-btn ds-btn--primary" style="width: 100%; margin-top: 8px;">Se connecter</button>
            <a href="#" style="text-align: center; font-size: 13px; color: var(--ds-green-400); text-decoration: none;">Mot de passe oubli√© ?</a>
          </form>
        </div>
      `,
      'form-inputs': `
        <h2>Input Fields</h2>
        <div style="max-width: 500px; margin: 0 auto;">
          <div class="demo">
            <div style="display: flex; flex-direction: column; gap: 16px;">
              <div>
                <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Nom complet</label>
                <input type="text" placeholder="Jean Dupont" style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);" />
              </div>
              <div>
                <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Email</label>
                <input type="email" placeholder="jean@example.com" style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);" />
              </div>
              <div>
                <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Message</label>
                <textarea placeholder="Votre message..." rows="4" style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary); resize: vertical;"></textarea>
              </div>
              <div style="display: flex; align-items: center; gap: 8px;">
                <input type="checkbox" id="terms" style="width: 18px; height: 18px; accent-color: var(--ds-green-400);" />
                <label for="terms" style="font-size: 14px; color: var(--ds-text-secondary);">J'accepte les conditions</label>
              </div>
            </div>
          </div>
        </div>
      `,
      'form-search': `
        <h2>Search Bar</h2>
        <div style="max-width: 600px; margin: 0 auto;">
          <div class="demo">
            <div style="position: relative;">
              <input type="search" placeholder="Rechercher..." style="width: 100%; padding: 14px 48px 14px 48px; background: var(--ds-bg-surface-2); border: 2px solid var(--ds-green-400); border-radius: 24px; color: var(--ds-text-primary); font-size: 15px;" />
              <span style="position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--ds-text-secondary); font-size: 20px;">üîç</span>
              <button style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); padding: 6px 16px; background: var(--ds-green-400); border: none; border-radius: 16px; color: black; font-weight: 600; cursor: pointer;">Go</button>
            </div>
            <div style="margin-top: 24px; display: flex; flex-wrap: gap: 8px;">
              <span style="padding: 6px 12px; background: var(--ds-bg-surface-3); border-radius: 16px; font-size: 13px; color: var(--ds-text-secondary);">Populaire: Bitcoin</span>
              <span style="padding: 6px 12px; background: var(--ds-bg-surface-3); border-radius: 16px; font-size: 13px; color: var(--ds-text-secondary);">Mining</span>
              <span style="padding: 6px 12px; background: var(--ds-bg-surface-3); border-radius: 16px; font-size: 13px; color: var(--ds-text-secondary);">Hashrate</span>
            </div>
          </div>
        </div>
      `,
      'form-select': `
        <h2>Select / Dropdown</h2>
        <div style="max-width: 500px; margin: 0 auto;">
          <div class="demo">
            <div style="display: flex; flex-direction: column; gap: 16px;">
              <div>
                <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Pays</label>
                <select style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary); cursor: pointer;">
                  <option>France</option>
                  <option>Qatar</option>
                  <option>√âtats-Unis</option>
                  <option>Canada</option>
                </select>
              </div>
              <div>
                <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">Type de mining</label>
                <select style="width: 100%; padding: 12px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-green-400); border-radius: 6px; color: var(--ds-text-primary); cursor: pointer;">
                  <option selected>Bitcoin (BTC)</option>
                  <option>Ethereum (ETH)</option>
                  <option>Litecoin (LTC)</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      `,
      'alert-success': `
        <h2>Alerts</h2>
        <div style="display: flex; flex-direction: column; gap: 16px;">
          <div style="padding: 16px 20px; background: rgba(16, 185, 129, 0.15); border-left: 4px solid var(--ds-green-400); border-radius: 6px; display: flex; align-items: center; gap: 12px;">
            <span style="font-size: 24px;">‚úì</span>
            <div>
              <div style="font-weight: 600; color: var(--ds-green-400); margin-bottom: 4px;">Succ√®s</div>
              <div style="color: var(--ds-text-secondary); font-size: 14px;">L'op√©ration a √©t√© effectu√©e avec succ√®s.</div>
            </div>
          </div>
          <div style="padding: 16px 20px; background: rgba(6, 182, 212, 0.15); border-left: 4px solid #06b6d4; border-radius: 6px; display: flex; align-items: center; gap: 12px;">
            <span style="font-size: 24px;">‚Ñπ</span>
            <div>
              <div style="font-weight: 600; color: #06b6d4; margin-bottom: 4px;">Information</div>
              <div style="color: var(--ds-text-secondary); font-size: 14px;">Nouvelle mise √† jour disponible.</div>
            </div>
          </div>
          <div style="padding: 16px 20px; background: rgba(245, 158, 11, 0.15); border-left: 4px solid #f59e0b; border-radius: 6px; display: flex; align-items: center; gap: 12px;">
            <span style="font-size: 24px;">‚ö†</span>
            <div>
              <div style="font-weight: 600; color: #f59e0b; margin-bottom: 4px;">Attention</div>
              <div style="color: var(--ds-text-secondary); font-size: 14px;">Temp√©rature √©lev√©e d√©tect√©e.</div>
            </div>
          </div>
          <div style="padding: 16px 20px; background: rgba(239, 68, 68, 0.15); border-left: 4px solid #ef4444; border-radius: 6px; display: flex; align-items: center; gap: 12px;">
            <span style="font-size: 24px;">‚úï</span>
            <div>
              <div style="font-weight: 600; color: #ef4444; margin-bottom: 4px;">Erreur</div>
              <div style="color: var(--ds-text-secondary); font-size: 14px;">Impossible de se connecter au serveur.</div>
            </div>
          </div>
        </div>
      `,
      'alert-error': `
        <h2>Error Alerts</h2>
        <div style="display: flex; flex-direction: column; gap: 16px;">
          <div style="padding: 20px; background: rgba(239, 68, 68, 0.2); border: 2px solid #ef4444; border-radius: 8px;">
            <div style="display: flex; align-items: start; gap: 12px;">
              <span style="font-size: 28px; color: #ef4444;">‚ö†</span>
              <div style="flex: 1;">
                <div style="font-weight: 700; color: #ef4444; font-size: 16px; margin-bottom: 8px;">Erreur Critique</div>
                <div style="color: var(--ds-text-secondary); margin-bottom: 12px;">
                  Le syst√®me a rencontr√© une erreur critique. Veuillez contacter le support technique.
                </div>
                <div style="display: flex; gap: 8px;">
                  <button class="ds-btn ds-btn--primary" style="background: #ef4444;">Contacter le support</button>
                  <button class="ds-btn ds-btn--secondary">R√©essayer</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      `,
      'badge-status': `
        <h2>Badges & Status</h2>
        <div class="demo">
          <div style="display: flex; flex-direction: column; gap: 24px;">
            <div>
              <h4 style="margin: 0 0 12px 0; font-size: 14px; color: var(--ds-text-tertiary);">STATUS BADGES</h4>
              <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                <span style="padding: 6px 12px; background: var(--ds-green-400); border-radius: 16px; font-size: 12px; font-weight: 600; color: black;">‚óè Live</span>
                <span style="padding: 6px 12px; background: #ef4444; border-radius: 16px; font-size: 12px; font-weight: 600; color: white;">‚óè Offline</span>
                <span style="padding: 6px 12px; background: #f59e0b; border-radius: 16px; font-size: 12px; font-weight: 600; color: black;">‚óè Warning</span>
                <span style="padding: 6px 12px; background: #06b6d4; border-radius: 16px; font-size: 12px; font-weight: 600; color: black;">‚óè Syncing</span>
                <span style="padding: 6px 12px; background: var(--ds-bg-surface-3); border-radius: 16px; font-size: 12px; font-weight: 600; color: var(--ds-text-secondary);">‚óè Idle</span>
              </div>
            </div>
            <div>
              <h4 style="margin: 0 0 12px 0; font-size: 14px; color: var(--ds-text-tertiary);">CATEGORY TAGS</h4>
              <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                <span style="padding: 4px 10px; background: rgba(16,185,129,0.15); border: 1px solid var(--ds-green-400); border-radius: 4px; font-size: 11px; font-weight: 600; color: var(--ds-green-400);">MINING</span>
                <span style="padding: 4px 10px; background: rgba(6,182,212,0.15); border: 1px solid #06b6d4; border-radius: 4px; font-size: 11px; font-weight: 600; color: #06b6d4;">CRYPTO</span>
                <span style="padding: 4px 10px; background: rgba(139,92,246,0.15); border: 1px solid #8b5cf6; border-radius: 4px; font-size: 11px; font-weight: 600; color: #8b5cf6;">WEB3</span>
                <span style="padding: 4px 10px; background: rgba(245,158,11,0.15); border: 1px solid #f59e0b; border-radius: 4px; font-size: 11px; font-weight: 600; color: #f59e0b;">HOT</span>
              </div>
            </div>
            <div>
              <h4 style="margin: 0 0 12px 0; font-size: 14px; color: var(--ds-text-tertiary);">NOTIFICATION BADGES</h4>
              <div style="display: flex; gap: 24px;">
                <div style="position: relative;">
                  <button class="ds-btn ds-btn--secondary">Messages</button>
                  <span style="position: absolute; top: -6px; right: -6px; width: 20px; height: 20px; background: #ef4444; border-radius: 50%; font-size: 11px; font-weight: 700; color: white; display: flex; align-items: center; justify-content: center;">5</span>
                </div>
                <div style="position: relative;">
                  <button class="ds-btn ds-btn--secondary">Notifications</button>
                  <span style="position: absolute; top: -6px; right: -6px; width: 20px; height: 20px; background: var(--ds-green-400); border-radius: 50%; font-size: 11px; font-weight: 700; color: black; display: flex; align-items: center; justify-content: center;">12</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      `,
      'notification': `
        <h2>Notifications</h2>
        <div style="max-width: 400px; margin: 0 auto; display: flex; flex-direction: column; gap: 12px;">
          <div style="padding: 16px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-green-400); border-radius: 8px; position: relative;">
            <div style="position: absolute; top: 12px; right: 12px; width: 8px; height: 8px; background: var(--ds-green-400); border-radius: 50%;"></div>
            <div style="font-weight: 600; margin-bottom: 6px;">Nouveau mineur connect√©</div>
            <div style="font-size: 14px; color: var(--ds-text-secondary); margin-bottom: 8px;">
              Un nouveau mineur S21 Hydro a √©t√© d√©tect√© et ajout√© au pool.
            </div>
            <div style="font-size: 12px; color: var(--ds-text-tertiary);">Il y a 2 minutes</div>
          </div>
          
          <div style="padding: 16px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 8px;">
            <div style="font-weight: 600; margin-bottom: 6px;">Mise √† jour du syst√®me</div>
            <div style="font-size: 14px; color: var(--ds-text-secondary); margin-bottom: 8px;">
              Une nouvelle version du firmware est disponible (v2.4.1).
            </div>
            <div style="font-size: 12px; color: var(--ds-text-tertiary);">Il y a 1 heure</div>
          </div>
          
          <div style="padding: 16px; background: var(--ds-bg-surface-2); border: 1px solid var(--ds-border-default); border-radius: 8px; opacity: 0.6;">
            <div style="font-weight: 600; margin-bottom: 6px;">Maintenance programm√©e</div>
            <div style="font-size: 14px; color: var(--ds-text-secondary); margin-bottom: 8px;">
              Maintenance du syst√®me pr√©vue demain √† 3h00 UTC.
            </div>
            <div style="font-size: 12px; color: var(--ds-text-tertiary);">Il y a 3 heures</div>
          </div>
        </div>
      `
    };

    function showComponentPreview(componentType) {
      const previewContent =
        document.getElementById('previewContent') ||
        document.getElementById('pageContentWrapper');
      const template = componentPreviews[componentType];
      
      if (!previewContent) return;
      
      if (template) {
        previewContent.innerHTML = template;
        
        // Animation de transition
        previewContent.style.transition = 'all 0.3s ease';
        previewContent.style.opacity = '0';
        previewContent.style.transform = 'translateY(10px)';
        
        setTimeout(() => {
          previewContent.style.opacity = '1';
          previewContent.style.transform = 'translateY(0)';
        }, 50);
      }
    }

    function openPaletteModal(paletteId) {
      paletteInModal = paletteId;
      const palette = palettes[paletteId];
      
      document.getElementById('modalTitle').textContent = `Palette ${palette.name}`;
      
      const modalBody = document.getElementById('modalBody');
      modalBody.innerHTML = `
        <div class="token-group">
          <h3 class="token-group__title">D√©grad√© de fond</h3>
          <div class="gradient-preview" style="background: ${palette.gradient};"></div>
          <div class="token-item">
            <span class="token-item__name">CSS</span>
            <span class="token-item__value">${palette.gradient}</span>
            <button class="copy-btn" onclick="copyToClipboard('${palette.gradient.replace(/'/g, "\\'")}', this)">üìã Copy</button>
          </div>
        </div>

        <div class="token-group">
          <h3 class="token-group__title">Background</h3>
          ${Object.entries(palette.background).map(([key, value]) => `
            <div class="token-item">
              <span class="token-item__name">${key}</span>
              <span class="token-item__value">
                <span class="token-item__swatch" style="background: ${value};"></span>
                ${value}
              </span>
              <button class="copy-btn" onclick="copyToClipboard('${value}', this)">üìã Copy</button>
            </div>
          `).join('')}
        </div>

        <div class="token-group">
          <h3 class="token-group__title">Text</h3>
          ${Object.entries(palette.text).map(([key, value]) => `
            <div class="token-item">
              <span class="token-item__name">${key}</span>
              <span class="token-item__value">
                <span class="token-item__swatch" style="background: ${value};"></span>
                ${value}
              </span>
              <button class="copy-btn" onclick="copyToClipboard('${value}', this)">üìã Copy</button>
            </div>
          `).join('')}
        </div>

        <div class="token-group">
          <h3 class="token-group__title">Accents</h3>
          ${Object.entries(palette.accents).map(([key, value]) => `
            <div class="token-item">
              <span class="token-item__name">${key}</span>
              <span class="token-item__value">
                <span class="token-item__swatch" style="background: ${value};"></span>
                ${value}
              </span>
              <button class="copy-btn" onclick="copyToClipboard('${value}', this)">üìã Copy</button>
            </div>
          `).join('')}
        </div>
      `;
      
      document.getElementById('paletteModal').classList.add('is-visible');
    }

    function closePaletteModal() {
      document.getElementById('paletteModal').classList.remove('is-visible');
    }

    // Apply Typography DIRECTLY
    function applyTypography(typoId) {
      const root = document.documentElement;
      
      if (typoId === 'modern') {
        root.style.setProperty('--ds-font-sans', 'Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif');
        root.style.setProperty('--ds-font-mono', '"IBM Plex Mono", "Courier New", monospace');
      } else if (typoId === 'system') {
        root.style.setProperty('--ds-font-sans', 'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif');
        root.style.setProperty('--ds-font-mono', 'ui-monospace, "SF Mono", "Courier New", monospace');
      }
      
      // Update active state
      document.querySelectorAll('[data-typo]').forEach(card => {
        card.classList.remove('is-active');
      });
      const activeCard = document.querySelector('[data-typo="' + typoId + '"]');
      if (activeCard) activeCard.classList.add('is-active');
      
      // Animation
      const pageContentWrapper = document.getElementById('pageContentWrapper');
      if (pageContentWrapper) {
        pageContentWrapper.style.transition = 'all 0.3s ease';
        pageContentWrapper.style.opacity = '0.8';
        setTimeout(() => {
          pageContentWrapper.style.opacity = '1';
        }, 150);
      }
    }
    
    // Apply Spacing DIRECTLY
    function applySpacing(spacingId) {
      const root = document.documentElement;
      
      if (spacingId === 'compact') {
        root.style.setProperty('--ds-space-1', '2px');
        root.style.setProperty('--ds-space-2', '4px');
        root.style.setProperty('--ds-space-3', '6px');
        root.style.setProperty('--ds-space-4', '8px');
        root.style.setProperty('--ds-space-6', '12px');
        root.style.setProperty('--ds-space-8', '16px');
        root.style.setProperty('--ds-space-12', '24px');
        root.style.setProperty('--ds-space-16', '32px');
      } else if (spacingId === 'comfortable') {
        root.style.setProperty('--ds-space-1', '4px');
        root.style.setProperty('--ds-space-2', '8px');
        root.style.setProperty('--ds-space-3', '12px');
        root.style.setProperty('--ds-space-4', '16px');
        root.style.setProperty('--ds-space-6', '24px');
        root.style.setProperty('--ds-space-8', '32px');
        root.style.setProperty('--ds-space-12', '48px');
        root.style.setProperty('--ds-space-16', '64px');
      }
      
      // Update active state
      document.querySelectorAll('[data-spacing]').forEach(card => {
        card.classList.remove('is-active');
      });
      const activeCard = document.querySelector('[data-spacing="' + spacingId + '"]');
      if (activeCard) activeCard.classList.add('is-active');
      
      // Animation
      const pageContentWrapper = document.getElementById('pageContentWrapper');
      if (pageContentWrapper) {
        pageContentWrapper.style.transition = 'all 0.3s ease';
        pageContentWrapper.style.opacity = '0.8';
        setTimeout(() => {
          pageContentWrapper.style.opacity = '1';
        }, 150);
      }
    }
    
    // Apply palette DIRECTLY without modal
    function applyPaletteDirectly(paletteId) {
      const palette = palettes[paletteId];
      if (!palette || typeof palette !== 'object' || !palette.gradient || !palette.background || !palette.text || !palette.accents) {
        showToast('error', 'Palette invalide', 'Cette palette ne contient pas les champs requis (gradient/background/text/accents).');
        return;
      }
      if (!palette.background.bgPrimary || !palette.background.bgSecondary || !palette.background.bgTertiary) {
        showToast('error', 'Palette invalide', 'Background incomplet (bgPrimary/bgSecondary/bgTertiary requis).');
        return;
      }
      if (!palette.text.textPrimary || !palette.text.textSecondary || !palette.text.textTertiary) {
        showToast('error', 'Palette invalide', 'Text incomplet (textPrimary/textSecondary/textTertiary requis).');
        return;
      }
      if (!palette.accents.accentPrimary) {
        showToast('error', 'Palette invalide', 'Accents incomplets (accentPrimary requis).');
        return;
      }
      
      currentPalette = paletteId;
      const root = document.documentElement;
      
      // Appliquer les variables CSS de base
      root.style.setProperty('--preview-bg', palette.gradient);
      root.style.setProperty('--ds-bg-canvas', palette.background.bgPrimary);
      root.style.setProperty('--ds-bg-surface-1', palette.background.bgSecondary);
      root.style.setProperty('--ds-bg-surface-2', palette.background.bgTertiary);
      root.style.setProperty('--ds-text-primary', palette.text.textPrimary);
      root.style.setProperty('--ds-text-secondary', palette.text.textSecondary);
      root.style.setProperty('--ds-text-tertiary', palette.text.textTertiary);
      root.style.setProperty('--ds-green-400', palette.accents.accentPrimary);
      root.style.setProperty('--ds-green-500', palette.accents.accentSecondary);
      root.style.setProperty('--ds-green-600', palette.accents.accentTertiary);
      
      // Appliquer borders si disponibles (Hearst Qatar)
      if (palette.borders) {
        root.style.setProperty('--ds-border-default', palette.borders.borderDefault);
        root.style.setProperty('--ds-border-green', palette.borders.borderGreen);
      }
      
      // Appliquer effects si disponibles (Hearst Qatar)
      if (palette.effects) {
        root.style.setProperty('--ds-glow-green', palette.effects.glowGreen);
        root.style.setProperty('--ds-glow-green-medium', palette.effects.glowGreenMedium);
        root.style.setProperty('--ds-shadow-green', palette.effects.shadowGreen);
      }
      
      // Appliquer couleurs s√©mantiques si disponibles (Hearst Qatar)
      if (palette.semantic) {
        root.style.setProperty('--ds-success', palette.semantic.success);
        root.style.setProperty('--ds-error', palette.semantic.error);
        root.style.setProperty('--ds-warning', palette.semantic.warning);
        root.style.setProperty('--ds-info', palette.semantic.info);
      }
      
      // Appliquer backgrounds cards (glassmorphism pour Hearst Qatar)
      root.style.setProperty('--ds-bg-card', palette.background.bgCard);
      root.style.setProperty('--ds-bg-card-hover', palette.background.bgCardHover);
      
      // Update selection bar
      const paletteColors = [palette.background.bgPrimary, palette.accents.accentPrimary, palette.background.bgSecondary];
      document.getElementById('selectedPaletteName').textContent = palette.name;
      const previewContainer = document.getElementById('selectedPalettePreview');
      previewContainer.innerHTML = paletteColors.map(color => 
        '<div class="selection-bar__color" style="background: ' + color + ';"></div>'
      ).join('');
      
      // Mettre √† jour l'√©tat actif
      document.querySelectorAll('.palette-card').forEach(card => {
        card.classList.remove('is-active');
      });
      const activeCard = document.querySelector('[data-palette="' + paletteId + '"]');
      if (activeCard) activeCard.classList.add('is-active');
      
      // Animation de confirmation
      const pageContentWrapper = document.getElementById('pageContentWrapper');
      if (pageContentWrapper) {
        pageContentWrapper.style.transition = 'all 0.3s ease';
        pageContentWrapper.style.opacity = '0.7';
        setTimeout(() => {
          pageContentWrapper.style.opacity = '1';
        }, 150);
      }
    }
    
    function applyPalette() {
      const paletteId = paletteInModal || currentPalette;
      applyPaletteDirectly(paletteId);
      paletteInModal = null;
      closePaletteModal();
      
      const palette = palettes[currentPalette];
      if (palette && palette.name) {
        showToast('success', 'Palette appliqu√©e !', `${palette.name} est maintenant active`);
      }
    }

    // Fermer modal en cliquant sur l'overlay
    document.getElementById('paletteModal').addEventListener('click', (e) => {
      if (e.target.id === 'paletteModal') {
        closePaletteModal();
      }
    });

    // ===== REFONTE UX : NAVIGATION FAVORIS / CUSTOM =====
    
    // Variable globale pour tracker le mode actuel
    let currentMode = 'favoris';
    
    // Bascule entre les modes Favoris et Custom
    function switchToMode(mode, triggerEl) {
      currentMode = mode;
      
      // Mettre √† jour les onglets actifs
      const tabs = Array.from(document.querySelectorAll('.quick-nav__tab'));
      tabs.forEach(tab => tab.classList.remove('is-active'));
      
      const tabToActivate =
        triggerEl ||
        tabs.find(t => (t.getAttribute('onclick') || '').includes(`'${mode}'`)) ||
        null;
      
      if (tabToActivate) tabToActivate.classList.add('is-active');
      
      // G√©rer l'affichage selon le mode
      if (mode === 'favoris') {
        showFavorisMode();
      } else if (mode === 'custom') {
        showCustomMode();
      }
    }
    
    // Mode FAVORIS : Afficher uniquement la section Favoris
    function showFavorisMode() {
      // Cacher TOUTES les sections
      document.querySelectorAll('.token-section').forEach(section => {
        section.style.display = 'none';
      });
      
      // Afficher UNIQUEMENT la section Favoris
      const favorisSection = document.getElementById('favoris');
      if (favorisSection) {
        favorisSection.style.display = 'block';
      }
      
      // Hide custom navigation
      const customNav = document.getElementById('customNav');
      if (customNav) {
        customNav.classList.add('is-hidden');
      }
      
      // Scroll to top
      const sidebar = document.querySelector('.selector-sidebar');
      if (sidebar) {
        sidebar.scrollTop = 0;
      }
    }
    
    // Mode CUSTOM : Afficher toutes les sections (sauf Favoris) + Navigation Custom
    function showCustomMode() {
      // Sections √† afficher en mode Custom
      const customSections = ['couleurs', 'typographie', 'espacements', 'boxes', 'menu', 'forms', 'alerts'];
      
      // Cacher TOUTES les sections d'abord
      document.querySelectorAll('.token-section').forEach(section => {
        section.style.display = 'none';
      });
      
      // Afficher les sections Custom (tout sauf Favoris)
      customSections.forEach(sectionId => {
        const section = document.getElementById(sectionId);
        if (section) {
          section.style.display = 'block';
        }
      });
      
      // Show custom navigation (static - no animation)
      const customNav = document.getElementById('customNav');
      if (customNav) {
        customNav.classList.remove('is-hidden');
      }
      
      // Mettre √† jour la liste des applications dynamiques
      updateCustomNavApps();
      
      // Scroll to top
      const sidebar = document.querySelector('.selector-sidebar');
      if (sidebar) {
        sidebar.scrollTop = 0;
      }
    }
    
    // Mettre √† jour la liste des applications/pages dans la navigation Custom
    function updateCustomNavApps() {
      const appsContainer = document.getElementById('customNavApps');
      if (!appsContainer) return;
      
      // G√©n√©rer les boutons pour chaque page
      appsContainer.innerHTML = pages.map(page => `
        <button 
          class="custom-nav__app-btn ${page.id === activePage ? 'is-active' : ''}" 
          onclick="switchToPage(${page.id})"
          aria-label="Basculer vers ${page.name}"
        >
          ${page.name}
        </button>
      `).join('');
      
      // Ajouter le bouton "+" pour cr√©er une nouvelle page
      appsContainer.innerHTML += `
        <button 
          class="custom-nav__app-btn" 
          onclick="addNewPage()" 
          aria-label="Cr√©er une nouvelle page"
          style="border-style: dashed; opacity: 0.7;"
        >
          + Nouvelle
        </button>
      `;
    }
    
    // Basculer vers une page sp√©cifique
    function switchToPage(pageId) {
      activePage = pageId;
      renderPagesTabs();
      renderActivePage();
      updateCustomNavApps();
    }
    
    // Scroller vers une section sp√©cifique avec animation fluide
    function scrollToSection(sectionId) {
      const targetSection = document.getElementById(sectionId);
      const sidebar = document.querySelector('.selector-sidebar');
      
      if (targetSection && sidebar) {
        // Calculer la position relative dans la sidebar
        const sidebarTop = sidebar.scrollTop;
        const sectionTop = targetSection.offsetTop - sidebar.offsetTop;
        
        // Smooth scroll
        sidebar.scrollTo({
          top: sectionTop - 20, // 20px de marge
          behavior: 'smooth'
        });
        
        // Effet visuel temporaire
        targetSection.style.transition = 'all 0.3s ease';
        targetSection.style.transform = 'scale(1.01)';
        targetSection.style.boxShadow = '0 0 0 2px var(--ds-green-400)';
        
        setTimeout(() => {
          targetSection.style.transform = 'scale(1)';
          targetSection.style.boxShadow = 'none';
        }, 500);
      }
    }
    
    // Apply a complete configuration preset (palette + typography + spacing)
    function applyConfigPreset(configId) {
      const configs = {
        config1: {
          name: 'Style Hearst Qatar',
          palette: 'hearst-qatar',
          typography: 'modern',
          spacing: 'comfortable'
        },
        config2: {
          name: 'Light & Clean',
          palette: 'light-clean',
          typography: 'modern',
          spacing: 'comfortable'
        },
        config3: {
          name: 'Tech Dashboard',
          palette: 'blue-tech',
          typography: 'system',
          spacing: 'compact'
        },
        config4: {
          name: 'Mining Ops',
          palette: 'green-mining',
          typography: 'modern',
          spacing: 'compact'
        }
      };
      
      const config = configs[configId];
      if (!config) return;
      
      // Apply all settings at once
      applyPaletteDirectly(config.palette);
      applyTypography(config.typography);
      applySpacing(config.spacing);
      
      // Show notification
      showToast('success', 'Configuration appliqu√©e !', `${config.name} : ${config.palette} ‚Ä¢ ${config.typography} ‚Ä¢ ${config.spacing}`);
    }
    
    // Open custom configuration creator
    function openCustomConfigCreator() {
      openConfigurationComplete();
    }
    
    // Open Configuration Compl√®te (create a new page with all configurations)
    function openConfigurationComplete() {
      const pageName = '‚öôÔ∏è Configuration Compl√®te';
      
      // Check if config page already exists
      const existingPage = pages.find(p => p.name === pageName);
      if (existingPage) {
        // Switch to existing page
        activePage = existingPage.id;
        renderPagesTabs();
        renderActivePage();
        return;
      }
      
      // Create new configuration page
      const newPage = {
        id: nextPageId++,
        type: 'config',
        name: pageName
      };
      
      pages.push(newPage);
      activePage = newPage.id;
      
      renderPagesTabs();
      renderActivePage();
    }
    
    // [DEPRECATED] Ancienne fonction showOnlySection - Gard√©e pour compatibilit√©
    // Redirige maintenant vers le mode Custom avec scroll vers la section
    function showOnlySection(sectionId) {
      // Basculer en mode Custom si pas d√©j√† actif
      if (currentMode !== 'custom') {
        switchToMode('custom');
      }
      
      // Attendre que le mode Custom soit affich√©, puis scroller
      setTimeout(() => {
        scrollToSection(sectionId);
      }, 150);
    }

    // Update selection bar when palette changes
    function updateSelectionBar(paletteName, colors) {
      document.getElementById('selectedPaletteName').textContent = paletteName;
      const preview = document.getElementById('selectedPalettePreview');
      preview.innerHTML = colors.map(color => 
        `<div class="selection-bar__color" style="background: ${color};"></div>`
      ).join('');
    }

    // Update selected component display
    function updateSelectedComponent(componentName) {
      document.getElementById('selectedComponent').textContent = componentName;
    }

    // Enhanced showComponentPreview with selection bar update
    const originalShowComponentPreview = showComponentPreview;
    showComponentPreview = function(componentType) {
      originalShowComponentPreview(componentType);
      
      // Update selection bar
      const componentNames = {
        'card-basic': 'Card Basic',
        'card-gradient': 'Card Gradient',
        'card-bordered': 'Card Border',
        'card-glass': 'Card Glass',
        'menu-top': 'Top Nav',
        'menu-sidebar': 'Sidebar Nav',
        'menu-mobile': 'Mobile Nav',
        'menu-tabs': 'Tabs',
        'form-login': 'Login Form',
        'form-inputs': 'Input Fields',
        'form-search': 'Search Bar',
        'form-select': 'Dropdown',
        'alert-success': 'Success Alert',
        'alert-error': 'Error Alert',
        'badge-status': 'Badges',
        'notification': 'Notification'
      };
      
      updateSelectedComponent(componentNames[componentType] || componentType);
      
      // Show relevant suggestions
      showRelevantSuggestions(componentType);
    };

    // Smart suggestions based on current selection
    function showSmartSuggestions(sectionId) {
      const suggestions = document.getElementById('colorSuggestions');
      if (suggestions && sectionId === 'couleurs') {
        suggestions.classList.add('is-visible');
      }
    }

    function showRelevantSuggestions(componentType) {
      const suggestions = document.getElementById('colorSuggestions');
      if (!suggestions) return;
      
      const suggestionsList = suggestions.querySelector('.smart-suggestions__list');
      
      // Dynamic suggestions based on component
      const suggestionMap = {
        'card-glass': [
          { palette: 'dark-pro', text: '‚ú® Dark Pro makes glassmorphism shine!' },
          { palette: 'blue-tech', text: 'üåä Blue Tech creates stunning glass effects' }
        ],
        'form-login': [
          { palette: 'dark-pro', text: 'üîê Dark Pro perfect for modern login forms' },
          { palette: 'light-clean', text: '‚òÄÔ∏è Light Clean for friendly login experience' }
        ],
        'menu-sidebar': [
          { palette: 'dark-pro', text: 'üì± Dark Pro ideal for app sidebars' },
          { palette: 'blue-tech', text: 'üíº Blue Tech for professional dashboards' }
        ]
      };
      
      if (suggestionMap[componentType]) {
        suggestionsList.innerHTML = suggestionMap[componentType].map(s => 
          `<div class="smart-suggestions__item" onclick="applySuggestion('${s.palette}', '${componentType}')">
            <span>${s.text}</span>
            <span style="font-size: 11px; color: var(--ds-green-400);">Essayer ‚Üí</span>
          </div>`
        ).join('');
        suggestions.classList.add('is-visible');
      }
    }

    // Apply suggestion (palette + component combo)
    function applySuggestion(paletteId, componentType) {
      // Appliquer la palette via la voie unique (coh√©rence + gardes)
      applyPaletteDirectly(paletteId);
      
      // Show component preview
      if (componentType) {
        showComponentPreview(componentType);
      }
      
      // Smooth scroll to preview
      document.querySelector('.preview-zone').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Compare mode (side-by-side comparison)
    function compareMode() {
      showToast('info', 'Mode Comparaison', 'Fonctionnalit√© √† venir ! Comparez 2 palettes c√¥te √† c√¥te');
    }

    // Export theme
    function exportTheme() {
      const palette = palettes[currentPalette];
      const themeData = {
        name: palette.name,
        timestamp: new Date().toISOString(),
        palette: palette,
        tokens: {
          colors: palette,
          typography: 'Inter + IBM Plex Mono',
          spacing: 'Comfortable'
        }
      };
      
      const blob = new Blob([JSON.stringify(themeData, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `hearst-theme-${palette.name.toLowerCase().replace(/\s+/g, '-')}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // NOTE: on n'override plus openPaletteModal pour √©viter de modifier la selection bar
    // tant que l'utilisateur n'a pas explicitement cliqu√© "Appliquer".

    // Initialize: Show suggestions on load
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize: Show ONLY Favoris section by default (with Configuration Compl√®te button)
      document.querySelectorAll('.token-section').forEach(section => {
        section.style.display = 'none';
      });
      
      const favorisSection = document.getElementById('favoris');
      if (favorisSection) {
        favorisSection.style.display = 'block';
      }
      
      setTimeout(() => {
        const suggestions = document.getElementById('colorSuggestions');
        if (suggestions) {
          suggestions.classList.add('is-visible');
        }
      }, 1000);
      
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        const dropdown = document.getElementById('saveLoadDropdown');
        const menu = document.getElementById('saveLoadMenu');
        if (dropdown && !dropdown.contains(e.target)) {
          menu.classList.remove('is-open');
        }
      });
    });

    // ==================== NEW TOOLS ====================

    // 1. SEARCH FUNCTIONALITY
    function handleSearch(event) {
      const query = event.target.value.toLowerCase();
      
      if (!query) {
        // Reset all cards visibility
        document.querySelectorAll('.palette-card').forEach(card => {
          card.style.display = '';
        });
        return;
      }
      
      // Search in palette cards
      document.querySelectorAll('.palette-card').forEach(card => {
        const name = card.querySelector('.palette-card__name')?.textContent.toLowerCase() || '';
        const matches = name.includes(query);
        card.style.display = matches ? '' : 'none';
      });
      
      // Scroll to first match
      const firstMatch = document.querySelector('.palette-card:not([style*="display: none"])');
      if (firstMatch) {
        firstMatch.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    // 2. COPY TO CLIPBOARD (UNIFI√â)
    function copyToClipboard(text, labelOrButton = 'Token') {
      const button = (labelOrButton instanceof HTMLElement) ? labelOrButton : null;
      const label = button ? 'Valeur' : String(labelOrButton || 'Token');
      
      navigator.clipboard.writeText(text).then(() => {
        if (button) {
          const originalText = button.textContent;
          button.textContent = '‚úì Copied!';
          button.classList.add('is-copied');
          
          setTimeout(() => {
            button.textContent = originalText;
            button.classList.remove('is-copied');
          }, 1200);
        }
        showToast('success', 'Copi√© !', `${label} copi√© dans le presse-papiers`);
      }).catch(() => {
        showToast('error', 'Erreur de copie', 'Impossible de copier dans le presse-papiers');
      });
    }

    // 3. SAVE/LOAD MENU
    function toggleSaveLoadMenu() {
      const menu = document.getElementById('saveLoadMenu');
      menu.classList.toggle('is-open');
    }

    // 4. SAVE THEME
    function saveTheme() {
      openThemeModal('save');
      const menu = document.getElementById('saveLoadMenu');
      if (menu) menu.classList.remove('is-open');
    }

    // 5. LOAD THEME
    function loadTheme() {
      const savedThemes = getSavedThemes();
      if (savedThemes.length === 0) {
        showToast('info', 'Aucun th√®me sauvegard√©', 'Vous n\'avez pas encore sauvegard√© de th√®me');
        return;
      }
      openThemeModal('manage');
      const menu = document.getElementById('saveLoadMenu');
      if (menu) menu.classList.remove('is-open');
    }

    // 6. VIEW SAVED THEMES
    function viewSavedThemes() {
      const savedThemes = getSavedThemes();
      if (savedThemes.length === 0) {
        showToast('info', 'Aucun th√®me sauvegard√©', 'Vous n\'avez pas encore sauvegard√© de th√®me');
        const menu = document.getElementById('saveLoadMenu');
        if (menu) menu.classList.remove('is-open');
        return;
      }
      
      openThemeModal('manage');
      const menu = document.getElementById('saveLoadMenu');
      if (menu) menu.classList.remove('is-open');
    }

    // 7. IMPORT THEME FROM JSON FILE
    function normalizeImportedPalette(raw) {
      // Supporte: exportTheme(), palette brute, ou { tokens: { colors } }, ou { palette }
      const palette =
        raw?.palette ||
        raw?.tokens?.colors ||
        raw?.tokens ||
        raw;
      
      if (!palette || typeof palette !== 'object') return null;
      
      // Si exportTheme(), le nom est aussi au top-level
      if (!palette.name && raw?.name) palette.name = raw.name;
      
      const ok =
        typeof palette.gradient === 'string' &&
        palette.background?.bgPrimary &&
        palette.background?.bgSecondary &&
        palette.background?.bgTertiary &&
        palette.text?.textPrimary &&
        palette.text?.textSecondary &&
        palette.text?.textTertiary &&
        palette.accents?.accentPrimary;
      
      return ok ? palette : null;
    }
    
    function importTheme() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = '.json';
      
      input.onchange = (e) => {
        const file = e.target.files[0];
        if (!file) return;
        
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            const raw = JSON.parse(event.target.result);
            const palette = normalizeImportedPalette(raw);
            
            if (!palette) {
              showToast('error', 'Import impossible', 'JSON non compatible (champs requis manquants).');
              return;
            }
            
            const newId = 'custom-' + Date.now();
            palettes[newId] = palette;
            
            applyPaletteDirectly(newId);
            showToast('success', 'Th√®me import√© !', 'Le th√®me a √©t√© import√© et appliqu√© avec succ√®s');
          } catch (err) {
            showToast('error', 'Erreur d\'import', 'Le fichier JSON est invalide ou corrompu');
          }
        };
        reader.readAsText(file);
      };
      
      input.click();
      toggleSaveLoadMenu();
    }

    // 8. CUSTOM PALETTE CREATOR
    function openCustomPaletteCreator() {
      const modalBody = document.getElementById('modalBody');
      document.getElementById('modalTitle').textContent = 'üé® Cr√©er une palette custom';
      
      modalBody.innerHTML = `
        <div style="display: flex; flex-direction: column; gap: 16px;">
          <div>
            <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">Nom de la palette</label>
            <input type="text" id="customPaletteName" placeholder="Ex: My Custom Palette" style="width: 100%; padding: 10px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);">
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">üé® Background Primary</label>
              <input type="color" id="customBgPrimary" value="#0f172a" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">üé® Background Secondary</label>
              <input type="color" id="customBgSecondary" value="#1e293b" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">üìù Text Primary</label>
              <input type="color" id="customTextPrimary" value="#f8fafc" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">üìù Text Secondary</label>
              <input type="color" id="customTextSecondary" value="#e2e8f0" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">‚ú® Accent Primary</label>
              <input type="color" id="customAccentPrimary" value="#10b981" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
            <div>
              <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">‚ú® Accent Secondary</label>
              <input type="color" id="customAccentSecondary" value="#14b8a6" style="width: 100%; height: 50px; border-radius: 6px; border: 1px solid var(--ds-border-default);">
            </div>
          </div>
          
          <div style="padding: 20px; background: var(--ds-bg-surface-1); border-radius: 8px; border: 1px solid var(--ds-border-default);">
            <p style="margin: 0; color: var(--ds-text-secondary); font-size: 13px;">
              üí° <strong>Astuce:</strong> Choisissez des couleurs contrast√©es pour une meilleure lisibilit√©. 
              Les accents doivent ressortir sur les fonds.
            </p>
          </div>
        </div>
      `;
      
      // Replace modal footer buttons
      const modalFooter = document.querySelector('.modal__footer');
      modalFooter.innerHTML = `
        <button class="ds-btn ds-btn--secondary" onclick="closePaletteModal()">Annuler</button>
        <button class="ds-btn ds-btn--primary" onclick="createCustomPalette()">Cr√©er & Appliquer</button>
      `;
      
      document.getElementById('paletteModal').classList.add('is-visible');
    }

    // 9. CREATE CUSTOM PALETTE
    function createCustomPalette() {
      const name = document.getElementById('customPaletteName').value || 'Custom Palette';
      const bgPrimary = document.getElementById('customBgPrimary').value;
      const bgSecondary = document.getElementById('customBgSecondary').value;
      const textPrimary = document.getElementById('customTextPrimary').value;
      const textSecondary = document.getElementById('customTextSecondary').value;
      const accentPrimary = document.getElementById('customAccentPrimary').value;
      const accentSecondary = document.getElementById('customAccentSecondary').value;
      
      // Create palette object
      const customId = 'custom-' + Date.now();
      palettes[customId] = {
        name: name,
        gradient: `radial-gradient(ellipse at top, ${bgSecondary} 0%, ${bgPrimary} 50%, #000000 100%)`,
        background: {
          bgPrimary: bgPrimary,
          bgSecondary: bgSecondary,
          bgTertiary: bgSecondary,
          bgCard: bgSecondary + '80',
          bgCardHover: bgSecondary + 'B3'
        },
        text: {
          textPrimary: textPrimary,
          textSecondary: textSecondary,
          textTertiary: textSecondary,
          textMuted: textSecondary + '99'
        },
        accents: {
          accentPrimary: accentPrimary,
          accentSecondary: accentSecondary,
          accentTertiary: accentPrimary
        }
      };
      
      // Apply the custom palette
      applyPaletteDirectly(customId);
      
      closePaletteModal();
      showToast('success', 'Palette cr√©√©e !', `${name} a √©t√© cr√©√©e et appliqu√©e. N'oubliez pas de la sauvegarder !`, 6000);
    }

    // ==================== MULTI-PAGE SYSTEM ====================

    // Page templates
    const pageTemplates = {
      dashboard: {
        name: 'üìä Dashboard',
        icon: 'üìä',
        content: `
          <div style="margin-bottom: 32px;">
            <h1 style="margin-bottom: 8px;">Dashboard - Hearst Mining</h1>
            <p style="color: var(--ds-text-secondary); font-size: 14px;">Vue d'ensemble des performances en temps r√©el</p>
          </div>

          <!-- KPIs Grid -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 32px;">
            <div class="ds-kpi" style="padding: 24px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px;">
              <div class="ds-kpi__label">Hashrate Total</div>
              <div class="ds-kpi__value" style="font-size: 36px;">5.98 EH/s</div>
              <div class="ds-kpi__meta">‚úÖ Live ‚Ä¢ +2.3% vs hier</div>
            </div>
            <div class="ds-kpi" style="padding: 24px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px;">
              <div class="ds-kpi__label">Puissance Consomm√©e</div>
              <div class="ds-kpi__value ds-kpi__value--accent" style="font-size: 36px;">87.7 MW</div>
              <div class="ds-kpi__meta">‚ö° Nominal ‚Ä¢ 99.8% uptime</div>
            </div>
            <div class="ds-kpi" style="padding: 24px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px;">
              <div class="ds-kpi__label">Miners Actifs</div>
              <div class="ds-kpi__value" style="font-size: 36px;">17,864</div>
              <div class="ds-kpi__meta">üü¢ Online ‚Ä¢ 32 en maintenance</div>
            </div>
            <div class="ds-kpi" style="padding: 24px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 12px;">
              <div class="ds-kpi__label">Efficacit√©</div>
              <div class="ds-kpi__value" style="font-size: 36px;">68.2 J/TH</div>
              <div class="ds-kpi__meta">‚öôÔ∏è Optimal ‚Ä¢ PUE: 1.09</div>
            </div>
          </div>

          <!-- Actions Row -->
          <div style="display: flex; gap: 12px; margin-bottom: 32px;">
            <button class="ds-btn ds-btn--primary">üìà Voir Graphiques</button>
            <button class="ds-btn ds-btn--secondary">‚öôÔ∏è Configuration</button>
            <button class="ds-btn ds-btn--secondary">üì• Export Data</button>
          </div>

          <!-- Recent Activity -->
          <div class="demo" style="margin-top: 32px;">
            <h3 style="margin-top: 0;">Activit√© R√©cente</h3>
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <div style="padding: 16px; background: var(--ds-bg-surface-1); border-left: 3px solid var(--ds-green-400); border-radius: 6px;">
                <div style="font-weight: 600; color: var(--ds-text-primary);">‚úÖ Pool Update Successful</div>
                <div style="font-size: 13px; color: var(--ds-text-tertiary); margin-top: 4px;">Il y a 5 minutes ‚Ä¢ Pool-A migr√© vers nouveau serveur</div>
              </div>
              <div style="padding: 16px; background: var(--ds-bg-surface-1); border-left: 3px solid #f59e0b; border-radius: 6px;">
                <div style="font-weight: 600; color: var(--ds-text-primary);">‚ö†Ô∏è Maintenance Planifi√©e</div>
                <div style="font-size: 13px; color: var(--ds-text-tertiary); margin-top: 4px;">Dans 2 heures ‚Ä¢ Rack B-12 maintenance pr√©ventive</div>
              </div>
              <div style="padding: 16px; background: var(--ds-bg-surface-1); border-left: 3px solid var(--ds-border-default); border-radius: 6px;">
                <div style="font-weight: 600; color: var(--ds-text-primary);">üìä Rapport G√©n√©r√©</div>
                <div style="font-size: 13px; color: var(--ds-text-tertiary); margin-top: 4px;">Il y a 1 heure ‚Ä¢ Rapport mensuel D√©cembre disponible</div>
              </div>
            </div>
          </div>
        `
      },
      info: {
        name: 'üìÑ Page Info',
        icon: 'üìÑ',
        content: `
          <div style="max-width: 900px; margin: 0 auto;">
            <h1 style="margin-bottom: 24px;">Documentation Technique</h1>
            
            <div class="demo" style="margin-bottom: 32px;">
              <h2 style="margin-top: 0; color: var(--ds-green-400);">Vue d'ensemble</h2>
              <p style="color: var(--ds-text-secondary); line-height: 1.6;">
                Cette section contient toute la documentation technique de votre projet. 
                Vous pouvez organiser vos informations par sections, ajouter des exemples de code, 
                et maintenir une documentation √† jour pour votre √©quipe.
              </p>
            </div>

            <div class="demo" style="margin-bottom: 32px;">
              <h2 style="margin-top: 0;">Sp√©cifications Techniques</h2>
              <div style="display: grid; gap: 16px;">
                <div style="padding: 16px; background: var(--ds-bg-surface-1); border-radius: 8px;">
                  <div style="font-weight: 600; margin-bottom: 8px;">üîß Infrastructure</div>
                  <ul style="color: var(--ds-text-secondary); margin: 0; padding-left: 20px;">
                    <li>Datacenter Tier III+</li>
                    <li>Cooling: Immersion cooling + Air cooling hybride</li>
                    <li>Connectivit√©: 100 Gbps fiber</li>
                  </ul>
                </div>
                <div style="padding: 16px; background: var(--ds-bg-surface-1); border-radius: 8px;">
                  <div style="font-weight: 600; margin-bottom: 8px;">‚ö° √âlectrique</div>
                  <ul style="color: var(--ds-text-secondary); margin: 0; padding-left: 20px;">
                    <li>Capacit√©: 150 MW</li>
                    <li>Source: 100% √©nergie renouvelable</li>
                    <li>PUE: 1.09 (moyenne annuelle)</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="demo">
              <h2 style="margin-top: 0;">Contact & Support</h2>
              <p style="color: var(--ds-text-secondary);">
                Pour toute question technique, contactez l'√©quipe support √† <strong>support@hearst-mining.com</strong>
              </p>
              <button class="ds-btn ds-btn--primary">Contacter le Support</button>
            </div>
          </div>
        `
      },
      rendering: {
        name: 'üé® 3D Rendering',
        icon: 'üé®',
        content: `
          <div style="text-align: center; margin-bottom: 32px;">
            <h1 style="margin-bottom: 8px;">Visualisation 3D</h1>
            <p style="color: var(--ds-text-secondary);">Rendu temps r√©el de l'infrastructure</p>
          </div>

          <!-- 3D Placeholder -->
          <div style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid var(--ds-border-default); border-radius: 16px; padding: 80px 40px; text-align: center; margin-bottom: 32px; position: relative; overflow: hidden;">
            <div style="position: absolute; top: 20px; left: 20px; right: 20px; bottom: 20px; border: 2px dashed var(--ds-border-default); border-radius: 12px; display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 16px;">
              <div style="font-size: 64px;">üéÆ</div>
              <div style="font-size: 18px; font-weight: 600; color: var(--ds-text-primary);">Zone de Rendu 3D</div>
              <div style="font-size: 14px; color: var(--ds-text-secondary); max-width: 400px;">
                Int√©grez ici votre viewer 3D (Three.js, Babylon.js, etc.) pour visualiser 
                vos infrastructures, mod√®les CAD, ou simulations en temps r√©el.
              </div>
            </div>
          </div>

          <!-- Controls -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; margin-bottom: 32px;">
            <button class="ds-btn ds-btn--secondary">üîÑ Rotation Auto</button>
            <button class="ds-btn ds-btn--secondary">üì∑ Capture</button>
            <button class="ds-btn ds-btn--secondary">üîç Zoom +</button>
            <button class="ds-btn ds-btn--secondary">üîç Zoom -</button>
            <button class="ds-btn ds-btn--secondary">üè† Reset View</button>
            <button class="ds-btn ds-btn--primary">‚¨á Export GLB</button>
          </div>

          <!-- Info panel -->
          <div class="demo">
            <h3 style="margin-top: 0;">Informations du Mod√®le</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
              <div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-bottom: 4px;">Vertices</div>
                <div style="font-size: 20px; font-weight: 600; color: var(--ds-text-primary);">1,247,853</div>
              </div>
              <div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-bottom: 4px;">Faces</div>
                <div style="font-size: 20px; font-weight: 600; color: var(--ds-text-primary);">624,192</div>
              </div>
              <div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-bottom: 4px;">Textures</div>
                <div style="font-size: 20px; font-weight: 600; color: var(--ds-text-primary);">28</div>
              </div>
              <div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-bottom: 4px;">FPS</div>
                <div style="font-size: 20px; font-weight: 600; color: var(--ds-green-400);">60</div>
              </div>
            </div>
          </div>
        `
      },
      analytics: {
        name: 'üìà Analytics',
        icon: 'üìà',
        content: `
          <div style="margin-bottom: 32px;">
            <h1 style="margin-bottom: 8px;">Analytics & Rapports</h1>
            <p style="color: var(--ds-text-secondary);">Analyses d√©taill√©es des performances</p>
          </div>

          <!-- Charts Placeholder -->
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; margin-bottom: 32px;">
            <div class="demo">
              <h3 style="margin-top: 0;">üìä Hashrate - 7 Derniers Jours</h3>
              <div style="height: 200px; background: linear-gradient(to top, rgba(16, 185, 129, 0.1) 0%, transparent 100%); border: 1px solid var(--ds-border-default); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--ds-text-tertiary);">
                Chart.js / Recharts placeholder
              </div>
            </div>
            <div class="demo">
              <h3 style="margin-top: 0;">‚ö° Consommation √âlectrique</h3>
              <div style="height: 200px; background: linear-gradient(to top, rgba(59, 130, 246, 0.1) 0%, transparent 100%); border: 1px solid var(--ds-border-default); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: var(--ds-text-tertiary);">
                Chart.js / Recharts placeholder
              </div>
            </div>
          </div>

          <!-- Stats Table -->
          <div class="demo">
            <h3 style="margin-top: 0;">Statistiques D√©taill√©es</h3>
            <div style="overflow-x: auto;">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="border-bottom: 2px solid var(--ds-border-default);">
                    <th style="text-align: left; padding: 12px; color: var(--ds-text-secondary); font-weight: 600;">Date</th>
                    <th style="text-align: right; padding: 12px; color: var(--ds-text-secondary); font-weight: 600;">Hashrate</th>
                    <th style="text-align: right; padding: 12px; color: var(--ds-text-secondary); font-weight: 600;">Puissance</th>
                    <th style="text-align: right; padding: 12px; color: var(--ds-text-secondary); font-weight: 600;">Uptime</th>
                  </tr>
                </thead>
                <tbody>
                  <tr style="border-bottom: 1px solid var(--ds-border-subtle);">
                    <td style="padding: 12px; color: var(--ds-text-primary);">23 D√©c 2025</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">5.98 EH/s</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">87.7 MW</td>
                    <td style="padding: 12px; color: var(--ds-green-400); text-align: right;">99.8%</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--ds-border-subtle);">
                    <td style="padding: 12px; color: var(--ds-text-primary);">22 D√©c 2025</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">5.84 EH/s</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">86.2 MW</td>
                    <td style="padding: 12px; color: var(--ds-green-400); text-align: right;">99.9%</td>
                  </tr>
                  <tr style="border-bottom: 1px solid var(--ds-border-subtle);">
                    <td style="padding: 12px; color: var(--ds-text-primary);">21 D√©c 2025</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">5.91 EH/s</td>
                    <td style="padding: 12px; color: var(--ds-text-primary); text-align: right;">87.1 MW</td>
                    <td style="padding: 12px; color: var(--ds-green-400); text-align: right;">100%</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div style="margin-top: 24px; display: flex; gap: 12px;">
            <button class="ds-btn ds-btn--primary">üì• Export CSV</button>
            <button class="ds-btn ds-btn--secondary">üìä Rapport PDF</button>
          </div>
        `
      },
      config: {
        name: '‚öôÔ∏è Configuration',
        icon: '‚öôÔ∏è',
        content: `
          <div style="margin-bottom: 32px;">
            <h1 style="margin-bottom: 8px;">‚öôÔ∏è Configuration Compl√®te</h1>
            <p style="color: var(--ds-text-secondary); font-size: 14px;">Tous vos tokens graphiques en un seul endroit</p>
          </div>

          <!-- Couleurs Section -->
          <div class="demo" style="margin-bottom: 32px;">
            <h2 style="margin-top: 0; color: var(--ds-green-400);">üé® Palettes de Couleurs</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
              <div onclick="applyPaletteDirectly('dark-pro')" style="padding: 20px; background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: #f8fafc; margin-bottom: 8px;">Dark Pro</div>
                <div style="display: flex; gap: 4px;">
                  <div style="width: 20px; height: 20px; background: #0f172a; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #10b981; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #1e293b; border-radius: 4px;"></div>
                </div>
              </div>
              <div onclick="applyPaletteDirectly('light-clean')" style="padding: 20px; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: #0f172a; margin-bottom: 8px;">Light Clean</div>
                <div style="display: flex; gap: 4px;">
                  <div style="width: 20px; height: 20px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #0ea5e9; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #f1f5f9; border-radius: 4px;"></div>
                </div>
              </div>
              <div onclick="applyPaletteDirectly('blue-tech')" style="padding: 20px; background: linear-gradient(135deg, #075985 0%, #0c4a6e 100%); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: #e0f2fe; margin-bottom: 8px;">Blue Tech</div>
                <div style="display: flex; gap: 4px;">
                  <div style="width: 20px; height: 20px; background: #0c4a6e; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #06b6d4; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #075985; border-radius: 4px;"></div>
                </div>
              </div>
              <div onclick="applyPaletteDirectly('green-mining')" style="padding: 20px; background: linear-gradient(135deg, #14532d 0%, #052e16 100%); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: #dcfce7; margin-bottom: 8px;">Green Mining</div>
                <div style="display: flex; gap: 4px;">
                  <div style="width: 20px; height: 20px; background: #052e16; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #22c55e; border-radius: 4px;"></div>
                  <div style="width: 20px; height: 20px; background: #14532d; border-radius: 4px;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Typography Section -->
          <div class="demo" style="margin-bottom: 32px;">
            <h2 style="margin-top: 0; color: var(--ds-green-400);">Aa Typographie</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
              <div onclick="applyTypography('modern')" style="padding: 24px; background: var(--ds-bg-surface-1); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-size: 48px; font-weight: 700; color: var(--ds-text-primary); font-family: Inter;">Aa</div>
                <div style="margin-top: 12px; font-weight: 600; color: var(--ds-text-primary);">Modern</div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-top: 4px;">Inter + IBM Plex Mono</div>
              </div>
              <div onclick="applyTypography('system')" style="padding: 24px; background: var(--ds-bg-surface-1); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; text-align: center; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-size: 48px; font-weight: 700; color: var(--ds-text-primary); font-family: system-ui;">Aa</div>
                <div style="margin-top: 12px; font-weight: 600; color: var(--ds-text-primary);">System</div>
                <div style="font-size: 12px; color: var(--ds-text-tertiary); margin-top: 4px;">System UI Fonts</div>
              </div>
            </div>
          </div>

          <!-- Spacing Section -->
          <div class="demo" style="margin-bottom: 32px;">
            <h2 style="margin-top: 0; color: var(--ds-green-400);">‚ÜîÔ∏è Espacements</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 16px;">
              <div onclick="applySpacing('compact')" style="padding: 24px; background: var(--ds-bg-surface-1); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: var(--ds-text-primary); margin-bottom: 12px;">Compact</div>
                <div style="display: flex; flex-direction: column; gap: 4px;">
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 60%;"></div>
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 80%;"></div>
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 70%;"></div>
                </div>
              </div>
              <div onclick="applySpacing('comfortable')" style="padding: 24px; background: var(--ds-bg-surface-1); border: 2px solid var(--ds-border-default); border-radius: 12px; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.borderColor='var(--ds-green-400)'" onmouseout="this.style.borderColor='var(--ds-border-default)'">
                <div style="font-weight: 600; color: var(--ds-text-primary); margin-bottom: 12px;">Confortable</div>
                <div style="display: flex; flex-direction: column; gap: 12px;">
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 60%;"></div>
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 80%;"></div>
                  <div style="height: 8px; background: var(--ds-green-400); border-radius: 2px; width: 70%;"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div style="display: flex; gap: 12px; flex-wrap: wrap; padding: 24px; background: rgba(16, 185, 129, 0.1); border-radius: 12px; border: 1px solid var(--ds-green-400);">
            <button class="ds-btn ds-btn--primary" onclick="exportTheme()">üíæ Sauvegarder Configuration</button>
            <button class="ds-btn ds-btn--secondary" onclick="saveTheme()">üì• Export JSON</button>
            <button class="ds-btn ds-btn--secondary" onclick="openCustomPaletteCreator()">üé® Cr√©er Palette Custom</button>
          </div>
        `
      }
    };

    // Pages state
    let pages = [
      { id: 1, type: 'dashboard', name: 'Dashboard' }
    ];
    let activePage = 1;
    let nextPageId = 2;

    // Initialize pages system
    function initPagesSystem() {
      renderPagesTabs();
      renderActivePage();
    }

    // Render pages tabs
    function renderPagesTabs() {
      const pagesBar = document.getElementById('pagesBar');
      
      const tabsHTML = pages.map(page => {
        const template = pageTemplates[page.type];
        const isPendingDelete = pendingDeletePageId === page.id;
        return `
          <div class="page-tab ${page.id === activePage ? 'is-active' : ''}" onclick="switchToPage(${page.id})">
            <span class="page-tab__icon">${template.icon}</span>
            <span>${page.name}</span>
            ${
              pages.length > 1
                ? (
                    isPendingDelete
                      ? `
                        <span class="page-tab__actions" onclick="event.stopPropagation();">
                          <button class="page-tab__action-btn" type="button" onclick="cancelDeletePage()" aria-label="Annuler la suppression">Annuler</button>
                          <button class="page-tab__action-btn page-tab__action-btn--danger" type="button" onclick="confirmDeletePage(${page.id})" aria-label="Confirmer la suppression">Supprimer</button>
                        </span>
                      `
                      : `<button class="page-tab__close" type="button" onclick="event.stopPropagation(); requestDeletePage(${page.id})" aria-label="Supprimer la page">√ó</button>`
                  )
                : ''
            }
          </div>
        `;
      }).join('');
      
      const addButtonHTML = `
        <div class="page-tab page-tab--add" onclick="openAddPageModal()">
          <span style="font-size: 18px;">‚ûï</span>
          <span>Ajouter Page</span>
        </div>
      `;
      
      pagesBar.innerHTML = tabsHTML + addButtonHTML;
    }

    // Render active page content
    function renderActivePage() {
      const pageContentWrapper = document.getElementById('pageContentWrapper');
      const currentPage = pages.find(p => p.id === activePage);
      
      if (!currentPage) return;
      
      const template = pageTemplates[currentPage.type];
      pageContentWrapper.innerHTML = `
        <div class="page-template is-active">
          <div style="margin-bottom: 16px; padding: 12px 16px; background: var(--ds-bg-surface-1); border-left: 3px solid var(--ds-green-400); border-radius: 6px; display: flex; align-items: center; justify-content: space-between;">
            <div>
              <span style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.05em; color: var(--ds-text-tertiary);">Page Active</span>
              <div style="font-weight: 600; color: var(--ds-text-primary);">${template.icon} ${currentPage.name}</div>
            </div>
            <span style="padding: 4px 12px; background: rgba(16, 185, 129, 0.15); border: 1px solid var(--ds-green-400); border-radius: 12px; font-size: 11px; font-weight: 600; color: var(--ds-green-400);">üî¥ LIVE PREVIEW</span>
          </div>
          ${template.content}
        </div>
      `;
    }

    // Switch to page
    function switchToPage(pageId) {
      activePage = pageId;
      // Clear any pending inline delete state on navigation
      pendingDeletePageId = null;
      renderPagesTabs();
      renderActivePage();
      
      // Mettre √† jour la navigation Custom si en mode Custom
      if (currentMode === 'custom') {
        updateCustomNavApps();
      }
    }

    // Delete page
    let pendingDeletePageId = null;
    
    function requestDeletePage(pageId) {
      pendingDeletePageId = pageId;
      renderPagesTabs();
    }
    
    function cancelDeletePage() {
      pendingDeletePageId = null;
      renderPagesTabs();
    }
    
    function confirmDeletePage(pageId) {
      pendingDeletePageId = null;
      deletePage(pageId);
    }
    
    function deletePage(pageId) {
      if (pages.length === 1) {
        showToast('warning', 'Action impossible', 'Vous devez garder au moins une page');
        return;
      }
      
      pages = pages.filter(p => p.id !== pageId);
      
      // If we deleted the active page, switch to first page
      if (activePage === pageId) {
        activePage = pages[0].id;
      }
      
      renderPagesTabs();
      renderActivePage();
      
      // Mettre √† jour la navigation Custom si en mode Custom
      if (currentMode === 'custom') {
        updateCustomNavApps();
      }
      
      showToast('success', 'Page supprim√©e', 'La page a √©t√© supprim√©e');
    }

    // Global variable for selected page type
    let selectedPageType = 'dashboard';
    
    // Select page type
    function selectPageType(type) {
      selectedPageType = type;
      document.querySelectorAll('.page-type-option').forEach(el => {
        if (el.dataset.type === type) {
          el.style.borderColor = 'var(--ds-green-400)';
          el.style.background = 'rgba(16, 185, 129, 0.1)';
        } else {
          el.style.borderColor = 'var(--ds-border-default)';
          el.style.background = 'var(--ds-bg-surface-1)';
        }
      });
    }

    // Open add page modal
    function openAddPageModal() {
      const modalBody = document.getElementById('modalBody');
      document.getElementById('modalTitle').textContent = '‚ûï Ajouter une Nouvelle Page';
      
      const pageTypesHTML = Object.entries(pageTemplates).map(([key, template]) => {
        const descriptions = {
          'dashboard': 'Tableaux de bord avec KPIs et m√©triques',
          'info': 'Page d\'information et documentation',
          'rendering': 'Visualisation 3D et rendus interactifs',
          'analytics': 'Graphiques et analyses d√©taill√©es'
        };
        
        return '<div class="page-type-option" data-type="' + key + '" onclick="selectPageType(\'' + key + '\')" style="padding: 16px; background: var(--ds-bg-surface-1); border: 2px solid var(--ds-border-default); border-radius: 8px; cursor: pointer; transition: all 0.2s; display: flex; align-items: center; gap: 12px;">' +
          '<div style="font-size: 32px;">' + template.icon + '</div>' +
          '<div style="flex: 1;">' +
            '<div style="font-weight: 600; color: var(--ds-text-primary); margin-bottom: 4px;">' + template.name + '</div>' +
            '<div style="font-size: 12px; color: var(--ds-text-tertiary);">' + (descriptions[key] || '') + '</div>' +
          '</div>' +
        '</div>';
      }).join('');
      
      modalBody.innerHTML = '<div style="display: grid; gap: 16px;">' +
        '<div>' +
          '<label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--ds-text-primary);">Nom de la page</label>' +
          '<input type="text" id="newPageName" placeholder="Ex: Ma Dashboard Principale" style="width: 100%; padding: 10px; background: var(--ds-bg-surface-1); border: 1px solid var(--ds-border-default); border-radius: 6px; color: var(--ds-text-primary);">' +
        '</div>' +
        '<div>' +
          '<label style="display: block; margin-bottom: 12px; font-weight: 600; color: var(--ds-text-primary);">Type de page</label>' +
          '<div style="display: grid; gap: 12px;">' +
            pageTypesHTML +
          '</div>' +
        '</div>' +
      '</div>';
      
      // Replace modal footer buttons
      const modalFooter = document.querySelector('.modal__footer');
      modalFooter.innerHTML = '<button class="ds-btn ds-btn--secondary" onclick="closePaletteModal()">Annuler</button>' +
        '<button class="ds-btn ds-btn--primary" onclick="createNewPage()">‚úÖ Cr√©er Page</button>';
      
      document.getElementById('paletteModal').classList.add('is-visible');
      
      // Pre-select dashboard after a tiny delay to ensure DOM is ready
      setTimeout(() => selectPageType('dashboard'), 10);
    }

    // Create new page
    function createNewPage() {
      const pageName = document.getElementById('newPageName').value || 'Nouvelle Page';
      
      const newPage = {
        id: nextPageId++,
        type: selectedPageType,
        name: pageName
      };
      
      pages.push(newPage);
      activePage = newPage.id;
      
      renderPagesTabs();
      renderActivePage();
      closePaletteModal();
      
      // Mettre √† jour la navigation Custom si en mode Custom
      if (currentMode === 'custom') {
        updateCustomNavApps();
      }
      
      showToast('success', 'Page cr√©√©e !', `"${pageName}" a √©t√© cr√©√©e avec succ√®s`);
    }
    
    // Alias pour addNewPage (utilis√© dans la navigation Custom)
    function addNewPage() {
      openAddPageModal();
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      initPagesSystem();
    });
  </script>
</body>
</html>

